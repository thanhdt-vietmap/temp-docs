
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://maps.vietmap.vn/docs/sdk-mobile/sdk-android/">
      
      
      
      
      <link rel="icon" href="../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.27">
    
    
      
        <title>SDK Android - MAPS API DOCS</title>
      
    
    
  
      <link rel="stylesheet" href="../../assets/stylesheets/main.6543a935.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
  <link rel="stylesheet" href="../../assets/stylesheets/custom.3e8bd608.min.css">
  

    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#sdk-android" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="MAPS API DOCS" class="md-header__button md-logo" aria-label="MAPS API DOCS" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            MAPS API DOCS
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              SDK Android
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../map-api/overview/" class="md-tabs__link">
          
  
    
  
  MAPS API

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../sdk-web-gl/overview/" class="md-tabs__link">
          
  
    
  
  SDK WEB GL

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../overview/" class="md-tabs__link">
          
  
    
  
  SDK MOBILE

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="MAPS API DOCS" class="md-nav__button md-logo" aria-label="MAPS API DOCS" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    MAPS API DOCS
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../map-api/overview/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    MAPS API
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../sdk-web-gl/overview/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    SDK WEB GL
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../overview/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    SDK MOBILE
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#configure-gradle-and-androidmanifest" class="md-nav__link">
    <span class="md-ellipsis">
      Configure gradle and AndroidManifest
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-project" class="md-nav__link">
    <span class="md-ellipsis">
      Configure project
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-a-navigationactivity-to-utilize-the-sdk" class="md-nav__link">
    <span class="md-ellipsis">
      Create a NavigationActivity to utilize the SDK
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#start-navigation" class="md-nav__link">
    <span class="md-ellipsis">
      Start navigation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#customise-ui" class="md-nav__link">
    <span class="md-ellipsis">
      Customise UI
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#listener-and-execution-functions-in-the-custom-ui-screen" class="md-nav__link">
    <span class="md-ellipsis">
      Listener and execution functions in the custom UI screen
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-controller-for-manage-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Create controller for manage functions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api-key-and-styleurl" class="md-nav__link">
    <span class="md-ellipsis">
      API key and styleURL
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="sdk-android">SDK Android<a class="headerlink" href="#sdk-android" title="Permanent link">&para;</a></h1>
<h2 id="configure-gradle-and-androidmanifest">Configure gradle and AndroidManifest<a class="headerlink" href="#configure-gradle-and-androidmanifest" title="Permanent link">&para;</a></h2>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>    <span class="n">implementation</span> <span class="s">&quot;androidx.recyclerview:recyclerview:1.2.1&quot;</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>    <span class="n">implementation</span> <span class="s">&quot;androidx.cardview:cardview:1,0,0&quot;</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    <span class="n">implementation</span> <span class="s">&quot;androidx.lifecycle:lifecycle-extensions:2.2.0&quot;</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>    <span class="n">implementation</span> <span class="s">&quot;com.google.android.gms:play-services-location:21.0.1&quot;</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>    <span class="n">implementation</span> <span class="s">&quot;com.jakewharton:butterknife:10.2.3&quot;</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>    <span class="n">implementation</span> <span class="err">&#39;</span><span class="n">androidx</span><span class="p">.</span><span class="n">core</span><span class="p">:</span><span class="n">core</span><span class="o">-</span><span class="n">ktx</span><span class="p">:</span><span class="mf">1.7</span><span class="p">.</span><span class="mi">0</span><span class="err">&#39;</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>    <span class="n">implementation</span> <span class="err">&#39;</span><span class="n">com</span><span class="p">.</span><span class="n">github</span><span class="p">.</span><span class="n">vietmap</span><span class="o">-</span><span class="n">company</span><span class="p">:</span><span class="n">maps</span><span class="o">-</span><span class="n">sdk</span><span class="o">-</span><span class="n">android</span><span class="p">:</span><span class="mf">1.0</span><span class="p">.</span><span class="mi">0</span><span class="err">&#39;</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>    <span class="n">implementation</span> <span class="err">&#39;</span><span class="n">com</span><span class="p">.</span><span class="n">github</span><span class="p">.</span><span class="n">vietmap</span><span class="o">-</span><span class="n">company</span><span class="p">:</span><span class="n">maps</span><span class="o">-</span><span class="n">sdk</span><span class="o">-</span><span class="n">navigation</span><span class="o">-</span><span class="n">ui</span><span class="o">-</span><span class="n">android</span><span class="p">:</span><span class="mf">1.1</span><span class="p">.</span><span class="mi">0</span><span class="err">&#39;</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>    <span class="n">implementation</span> <span class="err">&#39;</span><span class="n">com</span><span class="p">.</span><span class="n">github</span><span class="p">.</span><span class="n">vietmap</span><span class="o">-</span><span class="n">company</span><span class="p">:</span><span class="n">maps</span><span class="o">-</span><span class="n">sdk</span><span class="o">-</span><span class="n">navigation</span><span class="o">-</span><span class="n">android</span><span class="p">:</span><span class="mf">1.1</span><span class="p">.</span><span class="mi">0</span><span class="err">&#39;</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>    <span class="n">implementation</span> <span class="err">&#39;</span><span class="n">com</span><span class="p">.</span><span class="n">github</span><span class="p">.</span><span class="n">vietmap</span><span class="o">-</span><span class="n">company</span><span class="p">:</span><span class="n">vietmap</span><span class="o">-</span><span class="n">services</span><span class="o">-</span><span class="n">core</span><span class="p">:</span><span class="mf">1.0</span><span class="p">.</span><span class="mi">0</span><span class="err">&#39;</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>    <span class="n">implementation</span> <span class="err">&#39;</span><span class="n">com</span><span class="p">.</span><span class="n">github</span><span class="p">.</span><span class="n">vietmap</span><span class="o">-</span><span class="n">company</span><span class="p">:</span><span class="n">vietmap</span><span class="o">-</span><span class="n">services</span><span class="o">-</span><span class="n">directions</span><span class="o">-</span><span class="n">models</span><span class="p">:</span><span class="mf">1.0</span><span class="p">.</span><span class="mi">1</span><span class="err">&#39;</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>    <span class="n">implementation</span> <span class="err">&#39;</span><span class="n">com</span><span class="p">.</span><span class="n">github</span><span class="p">.</span><span class="n">vietmap</span><span class="o">-</span><span class="n">company</span><span class="p">:</span><span class="n">vietmap</span><span class="o">-</span><span class="n">services</span><span class="o">-</span><span class="n">turf</span><span class="o">-</span><span class="n">android</span><span class="p">:</span><span class="mf">1.0</span><span class="p">.</span><span class="mi">2</span><span class="err">&#39;</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>    <span class="n">implementation</span> <span class="err">&#39;</span><span class="n">com</span><span class="p">.</span><span class="n">github</span><span class="p">.</span><span class="n">vietmap</span><span class="o">-</span><span class="n">company</span><span class="p">:</span><span class="n">vietmap</span><span class="o">-</span><span class="n">services</span><span class="o">-</span><span class="n">android</span><span class="p">:</span><span class="mf">1.1</span><span class="p">.</span><span class="mi">1</span><span class="err">&#39;</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>    <span class="n">implementation</span> <span class="err">&#39;</span><span class="n">com</span><span class="p">.</span><span class="n">squareup</span><span class="p">.</span><span class="n">picasso</span><span class="p">:</span><span class="n">picasso</span><span class="p">:</span><span class="mf">2.8</span><span class="err">&#39;</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>    <span class="n">implementation</span> <span class="err">&#39;</span><span class="n">com</span><span class="p">.</span><span class="n">github</span><span class="p">.</span><span class="n">vietmap</span><span class="o">-</span><span class="n">company</span><span class="p">:</span><span class="n">vietmap</span><span class="o">-</span><span class="n">services</span><span class="o">-</span><span class="n">geojson</span><span class="o">-</span><span class="n">android</span><span class="p">:</span><span class="mf">1.0</span><span class="p">.</span><span class="mi">0</span><span class="err">&#39;</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>    <span class="n">implementation</span> <span class="n">group</span><span class="p">:</span> <span class="err">&#39;</span><span class="n">com</span><span class="p">.</span><span class="n">squareup</span><span class="p">.</span><span class="n">okhttp3</span><span class="err">&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="err">&#39;</span><span class="n">okhttp</span><span class="err">&#39;</span><span class="p">,</span> <span class="n">version</span><span class="p">:</span> <span class="err">&#39;</span><span class="mf">3.2</span><span class="p">.</span><span class="mi">0</span><span class="err">&#39;</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>    <span class="n">implementation</span> <span class="err">&#39;</span><span class="n">com</span><span class="p">.</span><span class="n">squareup</span><span class="p">.</span><span class="n">retrofit2</span><span class="p">:</span><span class="n">retrofit</span><span class="p">:</span><span class="mf">2.9</span><span class="p">.</span><span class="mi">0</span><span class="err">&#39;</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>    <span class="n">implementation</span> <span class="err">&#39;</span><span class="n">com</span><span class="p">.</span><span class="n">google</span><span class="p">.</span><span class="n">code</span><span class="p">.</span><span class="n">gson</span><span class="p">:</span><span class="n">gson</span><span class="p">:</span><span class="mf">2.10</span><span class="p">.</span><span class="mi">1</span><span class="err">&#39;</span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>    <span class="n">implementation</span> <span class="err">&#39;</span><span class="n">com</span><span class="p">.</span><span class="n">squareup</span><span class="p">.</span><span class="n">retrofit2</span><span class="p">:</span><span class="n">converter</span><span class="o">-</span><span class="n">gson</span><span class="p">:</span><span class="mf">2.0</span><span class="p">.</span><span class="mi">0</span><span class="o">-</span><span class="n">beta4</span><span class="err">&#39;</span>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a>    <span class="n">implementation</span> <span class="err">&#39;</span><span class="n">com</span><span class="p">.</span><span class="n">google</span><span class="p">.</span><span class="n">android</span><span class="p">.</span><span class="n">material</span><span class="p">:</span><span class="n">material</span><span class="p">:</span><span class="mf">1.7</span><span class="p">.</span><span class="mi">0</span><span class="err">&#39;</span>
</code></pre></div>
<strong>Configure the JitPack repository in the settings.gradle file.</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="n">dependencyResolutionManagement</span> <span class="p">{</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>    <span class="n">repositoriesMode</span><span class="p">.</span><span class="kr">set</span><span class="p">(</span><span class="n">RepositoriesMode</span><span class="p">.</span><span class="n">FAIL_ON_PROJECT_REPOS</span><span class="p">)</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>    <span class="n">repositories</span> <span class="p">{</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>        <span class="n">google</span><span class="p">()</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>        <span class="n">mavenCentral</span><span class="p">()</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>        <span class="c1">// add the following two lines to the repositories (at file setting.gradle)</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>        <span class="n">maven</span> <span class="p">{</span> <span class="n">url</span> <span class="err">&#39;</span><span class="n">https</span><span class="p">:</span><span class="c1">//plugins.gradle.org/m2&#39; }</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>        <span class="n">maven</span> <span class="p">{</span> <span class="n">url</span> <span class="err">&#39;</span><span class="n">https</span><span class="p">:</span><span class="c1">//jitpack.io&#39; }</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>    <span class="p">}</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="p">}</span>
</code></pre></div>
For older projects, add the following code to the build.gradle file in the project module:
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="n">allprojects</span> <span class="p">{</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>    <span class="n">repositories</span> <span class="p">{</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>        <span class="n">google</span><span class="p">()</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>        <span class="n">maven</span> <span class="p">{</span> <span class="n">url</span> <span class="s">&quot;https://jitpack.io&quot;</span> <span class="p">}</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>    <span class="p">}</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="p">}</span>
</code></pre></div></p>
<p>Change the compileSdkVersion and targetSdkVersion to version 33.
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="n">compileSdk</span> <span class="mi">33</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="n">targetSdk</span> <span class="mi">33</span>
</code></pre></div></p>
<p>Add the following permissions to the AndroidManifest.xml file:
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>    <span class="p">&lt;</span><span class="n">uses</span><span class="o">-</span><span class="n">permission</span> <span class="n">android</span><span class="p">:</span><span class="n">name</span><span class="p">=</span><span class="s">&quot;android.permission.VIBRATE&quot;</span> <span class="o">/&gt;</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>    <span class="p">&lt;</span><span class="n">uses</span><span class="o">-</span><span class="n">permission</span> <span class="n">android</span><span class="p">:</span><span class="n">name</span><span class="p">=</span><span class="s">&quot;android.permission.FOREGROUND_SERVICE&quot;</span> <span class="o">/&gt;</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>    <span class="p">&lt;</span><span class="n">uses</span><span class="o">-</span><span class="n">permission</span> <span class="n">android</span><span class="p">:</span><span class="n">name</span><span class="p">=</span><span class="s">&quot;android.permission.ACCESS_COARSE_LOCATION&quot;</span> <span class="o">/&gt;</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>    <span class="p">&lt;</span><span class="n">uses</span><span class="o">-</span><span class="n">permission</span> <span class="n">android</span><span class="p">:</span><span class="n">name</span><span class="p">=</span><span class="s">&quot;android.permission.ACCESS_FINE_LOCATION&quot;</span> <span class="o">/&gt;</span>
</code></pre></div></p>
<h2 id="configure-project">Configure project<a class="headerlink" href="#configure-project" title="Permanent link">&para;</a></h2>
<p>Add the following color codes to the res/values/colors.xml file:
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>    <span class="p">&lt;</span><span class="n">color</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;colorPrimary&quot;</span><span class="o">&gt;</span><span class="p">#</span><span class="mi">8</span><span class="n">D64F9</span><span class="o">&lt;/</span><span class="n">color</span><span class="p">&gt;</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>    <span class="p">&lt;</span><span class="n">color</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;colorPrimaryDark&quot;</span><span class="o">&gt;</span><span class="p">#</span><span class="mi">7845</span><span class="n">F3</span><span class="o">&lt;/</span><span class="n">color</span><span class="p">&gt;</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>    <span class="p">&lt;</span><span class="n">color</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;colorAccent&quot;</span><span class="o">&gt;</span><span class="p">#</span><span class="n">F56FA3</span><span class="o">&lt;/</span><span class="n">color</span><span class="p">&gt;</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>    <span class="p">&lt;</span><span class="n">color</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;red&quot;</span><span class="o">&gt;</span><span class="p">#</span><span class="n">FF0000</span><span class="o">&lt;/</span><span class="n">color</span><span class="p">&gt;</span>
</code></pre></div></p>
<p>Create styles.xml at res/values 
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="o">&lt;?</span><span class="n">xml</span> <span class="n">version</span><span class="p">=</span><span class="s">&quot;1.0&quot;</span> <span class="n">encoding</span><span class="p">=</span><span class="s">&quot;utf-8&quot;</span><span class="p">?</span><span class="o">&gt;</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="p">&lt;</span><span class="n">resources</span><span class="p">&gt;</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="p">&lt;</span><span class="n">style</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;CustomNavigationMapRoute&quot;</span> <span class="n">parent</span><span class="p">=</span><span class="s">&quot;NavigationMapRoute&quot;</span><span class="o">&gt;</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>    <span class="p">&lt;</span><span class="n">item</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;upcomingManeuverArrowBorderColor&quot;</span><span class="o">&gt;</span><span class="p">@</span><span class="n">color</span><span class="o">/</span><span class="n">red</span><span class="o">&lt;/</span><span class="n">item</span><span class="p">&gt;</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="o">&lt;/</span><span class="n">style</span><span class="p">&gt;</span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="p">&lt;</span><span class="n">style</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;CustomNavigationView&quot;</span> <span class="n">parent</span><span class="p">=</span><span class="s">&quot;NavigationViewLight&quot;</span><span class="o">&gt;</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>    <span class="p">&lt;</span><span class="n">item</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;navigationViewRouteStyle&quot;</span><span class="o">&gt;</span><span class="p">@</span><span class="n">style</span><span class="o">/</span><span class="n">CustomNavigationMapRoute</span><span class="o">&lt;/</span><span class="n">item</span><span class="p">&gt;</span>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="o">&lt;/</span><span class="n">style</span><span class="p">&gt;</span>
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="p">&lt;</span><span class="n">style</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;customInstructionView&quot;</span><span class="o">&gt;</span>
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>    <span class="p">&lt;</span><span class="n">item</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;navigationViewLocationLayerStyle&quot;</span><span class="o">&gt;</span><span class="p">@</span><span class="n">style</span><span class="o">/</span><span class="n">NavigationLocationLayerStyle</span><span class="o">&lt;/</span><span class="n">item</span><span class="p">&gt;</span>
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a>    <span class="p">&lt;</span><span class="n">item</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;navigationViewRouteOverviewDrawable&quot;</span><span class="o">&gt;</span><span class="p">@</span><span class="n">drawable</span><span class="o">/</span><span class="n">ic_route_preview</span><span class="o">&lt;/</span><span class="n">item</span><span class="p">&gt;</span>
<a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a><span class="o">&lt;/</span><span class="n">style</span><span class="p">&gt;</span>
<a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a>
<a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a><span class="p">&lt;</span><span class="n">style</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;CustomInstructionView&quot;</span> <span class="n">parent</span><span class="p">=</span><span class="s">&quot;Theme.AppCompat.Light.NoActionBar&quot;</span><span class="o">&gt;</span>
<a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a>    <span class="p">&lt;</span><span class="n">item</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;navigationViewPrimary&quot;</span><span class="o">&gt;</span><span class="p">@</span><span class="n">color</span><span class="o">/</span><span class="n">mapbox_navigation_view_color_primary</span><span class="o">&lt;/</span><span class="n">item</span><span class="p">&gt;</span>
<a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a>    <span class="p">&lt;</span><span class="n">item</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;navigationViewSecondary&quot;</span><span class="o">&gt;</span><span class="p">@</span><span class="n">color</span><span class="o">/</span><span class="n">mapbox_navigation_view_color_secondary</span><span class="o">&lt;/</span><span class="n">item</span><span class="p">&gt;</span>
<a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a>    <span class="p">&lt;</span><span class="n">item</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;navigationViewAccent&quot;</span><span class="o">&gt;</span><span class="p">@</span><span class="n">color</span><span class="o">/</span><span class="n">mapbox_navigation_view_color_accent</span><span class="o">&lt;/</span><span class="n">item</span><span class="p">&gt;</span>
<a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a>    <span class="p">&lt;</span><span class="n">item</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;navigationViewPrimaryText&quot;</span><span class="o">&gt;</span><span class="p">@</span><span class="n">color</span><span class="o">/</span><span class="n">mapbox_navigation_view_color_secondary</span><span class="o">&lt;/</span><span class="n">item</span><span class="p">&gt;</span>
<a id="__codelineno-6-21" name="__codelineno-6-21" href="#__codelineno-6-21"></a>    <span class="p">&lt;</span><span class="n">item</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;navigationViewSecondaryText&quot;</span><span class="o">&gt;</span><span class="p">@</span><span class="n">color</span><span class="o">/</span><span class="n">mapbox_navigation_view_color_accent_text</span><span class="o">&lt;/</span><span class="n">item</span><span class="p">&gt;</span>
<a id="__codelineno-6-22" name="__codelineno-6-22" href="#__codelineno-6-22"></a>    <span class="p">&lt;</span><span class="n">item</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;navigationViewDivider&quot;</span><span class="o">&gt;</span><span class="p">@</span><span class="n">color</span><span class="o">/</span><span class="n">mapbox_navigation_view_color_divider</span><span class="o">&lt;/</span><span class="n">item</span><span class="p">&gt;</span>
<a id="__codelineno-6-23" name="__codelineno-6-23" href="#__codelineno-6-23"></a>
<a id="__codelineno-6-24" name="__codelineno-6-24" href="#__codelineno-6-24"></a>    <span class="p">&lt;</span><span class="n">item</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;navigationViewListBackground&quot;</span><span class="o">&gt;</span><span class="p">@</span><span class="n">color</span><span class="o">/</span><span class="n">mapbox_navigation_view_color_list_background</span><span class="o">&lt;/</span><span class="n">item</span><span class="p">&gt;</span>
<a id="__codelineno-6-25" name="__codelineno-6-25" href="#__codelineno-6-25"></a>
<a id="__codelineno-6-26" name="__codelineno-6-26" href="#__codelineno-6-26"></a>    <span class="p">&lt;</span><span class="n">item</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;navigationViewBannerBackground&quot;</span><span class="o">&gt;</span><span class="p">@</span><span class="n">color</span><span class="o">/</span><span class="n">mapbox_navigation_view_color_banner_background</span><span class="o">&lt;/</span><span class="n">item</span><span class="p">&gt;</span>
<a id="__codelineno-6-27" name="__codelineno-6-27" href="#__codelineno-6-27"></a>    <span class="p">&lt;</span><span class="n">item</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;navigationViewBannerPrimaryText&quot;</span><span class="o">&gt;</span><span class="p">@</span><span class="n">color</span><span class="o">/</span><span class="n">mapbox_navigation_view_color_banner_primary_text</span><span class="o">&lt;/</span><span class="n">item</span><span class="p">&gt;</span>
<a id="__codelineno-6-28" name="__codelineno-6-28" href="#__codelineno-6-28"></a>    <span class="p">&lt;</span><span class="n">item</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;navigationViewBannerSecondaryText&quot;</span><span class="o">&gt;</span><span class="p">@</span><span class="n">color</span><span class="o">/</span><span class="n">mapbox_navigation_view_color_banner_secondary_text</span><span class="o">&lt;/</span><span class="n">item</span><span class="p">&gt;</span>
<a id="__codelineno-6-29" name="__codelineno-6-29" href="#__codelineno-6-29"></a>    <span class="p">&lt;</span><span class="n">item</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;navigationViewBannerManeuverPrimary&quot;</span><span class="o">&gt;</span><span class="p">@</span><span class="n">color</span><span class="o">/</span><span class="n">mapbox_navigation_view_color_banner_maneuver_primary</span><span class="o">&lt;/</span><span class="n">item</span><span class="p">&gt;</span>
<a id="__codelineno-6-30" name="__codelineno-6-30" href="#__codelineno-6-30"></a>    <span class="p">&lt;</span><span class="n">item</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;navigationViewBannerManeuverSecondary&quot;</span><span class="o">&gt;</span><span class="p">@</span><span class="n">color</span><span class="o">/</span><span class="n">mapbox_navigation_view_color_banner_maneuver_secondary</span><span class="o">&lt;/</span><span class="n">item</span><span class="p">&gt;</span>
<a id="__codelineno-6-31" name="__codelineno-6-31" href="#__codelineno-6-31"></a>
<a id="__codelineno-6-32" name="__codelineno-6-32" href="#__codelineno-6-32"></a>    <span class="p">&lt;</span><span class="n">item</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;navigationViewProgress&quot;</span><span class="o">&gt;</span><span class="p">@</span><span class="n">color</span><span class="o">/</span><span class="n">mapbox_navigation_view_color_progress</span><span class="o">&lt;/</span><span class="n">item</span><span class="p">&gt;</span>
<a id="__codelineno-6-33" name="__codelineno-6-33" href="#__codelineno-6-33"></a>    <span class="p">&lt;</span><span class="n">item</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;navigationViewProgressBackground&quot;</span><span class="o">&gt;</span><span class="p">@</span><span class="n">color</span><span class="o">/</span><span class="n">mapbox_navigation_view_color_progress_background</span><span class="o">&lt;/</span><span class="n">item</span><span class="p">&gt;</span>
<a id="__codelineno-6-34" name="__codelineno-6-34" href="#__codelineno-6-34"></a>
<a id="__codelineno-6-35" name="__codelineno-6-35" href="#__codelineno-6-35"></a>    <span class="p">&lt;</span><span class="n">item</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;navigationViewRouteStyle&quot;</span><span class="o">&gt;</span><span class="p">@</span><span class="n">style</span><span class="o">/</span><span class="n">NavigationMapRoute</span><span class="o">&lt;/</span><span class="n">item</span><span class="p">&gt;</span>
<a id="__codelineno-6-36" name="__codelineno-6-36" href="#__codelineno-6-36"></a>
<a id="__codelineno-6-37" name="__codelineno-6-37" href="#__codelineno-6-37"></a>    <span class="p">&lt;</span><span class="n">item</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;navigationViewLocationLayerStyle&quot;</span><span class="o">&gt;</span><span class="p">@</span><span class="n">style</span><span class="o">/</span><span class="n">mapbox_LocationLayer</span><span class="o">&lt;/</span><span class="n">item</span><span class="p">&gt;</span>
<a id="__codelineno-6-38" name="__codelineno-6-38" href="#__codelineno-6-38"></a>
<a id="__codelineno-6-39" name="__codelineno-6-39" href="#__codelineno-6-39"></a>    <span class="p">&lt;</span><span class="n">item</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;navigationViewDestinationMarker&quot;</span><span class="o">&gt;</span><span class="p">@</span><span class="n">drawable</span><span class="o">/</span><span class="n">map_marker_light</span><span class="o">&lt;/</span><span class="n">item</span><span class="p">&gt;</span>
<a id="__codelineno-6-40" name="__codelineno-6-40" href="#__codelineno-6-40"></a>
<a id="__codelineno-6-41" name="__codelineno-6-41" href="#__codelineno-6-41"></a>    <span class="p">&lt;</span><span class="n">item</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;navigationViewRouteOverviewDrawable&quot;</span><span class="o">&gt;</span><span class="p">@</span><span class="n">drawable</span><span class="o">/</span><span class="n">ic_route_preview</span><span class="o">&lt;/</span><span class="n">item</span><span class="p">&gt;</span>
<a id="__codelineno-6-42" name="__codelineno-6-42" href="#__codelineno-6-42"></a>
<a id="__codelineno-6-43" name="__codelineno-6-43" href="#__codelineno-6-43"></a>    <span class="p">&lt;</span><span class="n">item</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;navigationViewMapStyle&quot;</span><span class="o">&gt;</span><span class="p">@</span><span class="n">string</span><span class="o">/</span><span class="n">navigation_guidance_day</span><span class="o">&lt;/</span><span class="n">item</span><span class="p">&gt;</span>
<a id="__codelineno-6-44" name="__codelineno-6-44" href="#__codelineno-6-44"></a><span class="o">&lt;/</span><span class="n">style</span><span class="p">&gt;</span>
<a id="__codelineno-6-45" name="__codelineno-6-45" href="#__codelineno-6-45"></a>
<a id="__codelineno-6-46" name="__codelineno-6-46" href="#__codelineno-6-46"></a><span class="o">&lt;!--</span> <span class="n">Base</span> <span class="n">application</span> <span class="n">theme</span><span class="p">.</span> <span class="o">--&gt;</span>
<a id="__codelineno-6-47" name="__codelineno-6-47" href="#__codelineno-6-47"></a><span class="p">&lt;</span><span class="n">style</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;AppTheme&quot;</span> <span class="n">parent</span><span class="p">=</span><span class="s">&quot;Theme.AppCompat.Light.DarkActionBar&quot;</span><span class="o">&gt;</span>
<a id="__codelineno-6-48" name="__codelineno-6-48" href="#__codelineno-6-48"></a>    <span class="o">&lt;!--</span> <span class="n">Customize</span> <span class="n">your</span> <span class="n">theme</span> <span class="n">here</span><span class="p">.</span> <span class="o">--&gt;</span>
<a id="__codelineno-6-49" name="__codelineno-6-49" href="#__codelineno-6-49"></a>    <span class="p">&lt;</span><span class="n">item</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;colorPrimary&quot;</span><span class="o">&gt;</span><span class="p">@</span><span class="n">color</span><span class="o">/</span><span class="n">colorPrimary</span><span class="o">&lt;/</span><span class="n">item</span><span class="p">&gt;</span>
<a id="__codelineno-6-50" name="__codelineno-6-50" href="#__codelineno-6-50"></a>    <span class="p">&lt;</span><span class="n">item</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;colorPrimaryDark&quot;</span><span class="o">&gt;</span><span class="p">@</span><span class="n">color</span><span class="o">/</span><span class="n">colorPrimaryDark</span><span class="o">&lt;/</span><span class="n">item</span><span class="p">&gt;</span>
<a id="__codelineno-6-51" name="__codelineno-6-51" href="#__codelineno-6-51"></a>    <span class="p">&lt;</span><span class="n">item</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;colorAccent&quot;</span><span class="o">&gt;</span><span class="p">@</span><span class="n">color</span><span class="o">/</span><span class="n">colorAccent</span><span class="o">&lt;/</span><span class="n">item</span><span class="p">&gt;</span>
<a id="__codelineno-6-52" name="__codelineno-6-52" href="#__codelineno-6-52"></a><span class="o">&lt;/</span><span class="n">style</span><span class="p">&gt;</span>
<a id="__codelineno-6-53" name="__codelineno-6-53" href="#__codelineno-6-53"></a>
<a id="__codelineno-6-54" name="__codelineno-6-54" href="#__codelineno-6-54"></a><span class="p">&lt;</span><span class="n">style</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;TestNavigationViewDark&quot;</span> <span class="n">parent</span><span class="p">=</span><span class="s">&quot;NavigationViewDark&quot;</span><span class="o">&gt;</span>
<a id="__codelineno-6-55" name="__codelineno-6-55" href="#__codelineno-6-55"></a>    <span class="o">&lt;!--</span> <span class="n">Map</span> <span class="n">style</span> <span class="n">URL</span> <span class="o">--&gt;</span>
<a id="__codelineno-6-56" name="__codelineno-6-56" href="#__codelineno-6-56"></a>    <span class="p">&lt;</span><span class="n">item</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;navigationViewMapStyle&quot;</span><span class="o">&gt;</span>
<a id="__codelineno-6-57" name="__codelineno-6-57" href="#__codelineno-6-57"></a>        <span class="n">YOUR</span> <span class="n">STYLE</span> <span class="n">URL</span> <span class="n">HERE</span>
<a id="__codelineno-6-58" name="__codelineno-6-58" href="#__codelineno-6-58"></a>    <span class="o">&lt;/</span><span class="n">item</span><span class="p">&gt;</span>
<a id="__codelineno-6-59" name="__codelineno-6-59" href="#__codelineno-6-59"></a><span class="o">&lt;/</span><span class="n">style</span><span class="p">&gt;</span>
<a id="__codelineno-6-60" name="__codelineno-6-60" href="#__codelineno-6-60"></a>
<a id="__codelineno-6-61" name="__codelineno-6-61" href="#__codelineno-6-61"></a><span class="p">&lt;</span><span class="n">style</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;TestNavigationViewLight&quot;</span> <span class="n">parent</span><span class="p">=</span><span class="s">&quot;NavigationViewLight&quot;</span><span class="o">&gt;</span>
<a id="__codelineno-6-62" name="__codelineno-6-62" href="#__codelineno-6-62"></a>    <span class="o">&lt;!--</span> <span class="n">Map</span> <span class="n">style</span> <span class="n">URL</span> <span class="o">--&gt;</span>
<a id="__codelineno-6-63" name="__codelineno-6-63" href="#__codelineno-6-63"></a>    <span class="p">&lt;</span><span class="n">item</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;navigationViewMapStyle&quot;</span><span class="o">&gt;</span>
<a id="__codelineno-6-64" name="__codelineno-6-64" href="#__codelineno-6-64"></a>        <span class="n">YOUR</span> <span class="n">STYLE</span> <span class="n">URL</span> <span class="n">HERE</span>
<a id="__codelineno-6-65" name="__codelineno-6-65" href="#__codelineno-6-65"></a>    <span class="o">&lt;/</span><span class="n">item</span><span class="p">&gt;</span>
<a id="__codelineno-6-66" name="__codelineno-6-66" href="#__codelineno-6-66"></a><span class="o">&lt;/</span><span class="n">style</span><span class="p">&gt;</span>
<a id="__codelineno-6-67" name="__codelineno-6-67" href="#__codelineno-6-67"></a><span class="o">&lt;/</span><span class="n">resources</span><span class="p">&gt;</span>
</code></pre></div></p>
<p>Add these following code into string.xml file
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>    <span class="p">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;title_mock_navigation&quot;</span><span class="o">&gt;</span><span class="n">Giả</span> <span class="n">bộ</span> <span class="err">Đ</span><span class="n">iều</span> <span class="n">hướng</span><span class="o">&lt;/</span><span class="n">string</span><span class="p">&gt;</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>    <span class="p">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;description_mock_navigation&quot;</span><span class="o">&gt;</span><span class="n">Giả</span> <span class="n">bộ</span> <span class="n">phiên</span> <span class="err">đ</span><span class="n">iều</span> <span class="n">hướng</span> <span class="n">dùng</span> <span class="n">máy</span> <span class="err">đị</span><span class="n">nh</span> <span class="n">vị</span> <span class="n">giả</span><span class="p">.</span><span class="o">&lt;/</span><span class="n">string</span><span class="p">&gt;</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>    <span class="p">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;title_off_route_detection&quot;</span><span class="o">&gt;</span><span class="n">Nhận</span> <span class="n">ra</span> <span class="n">Lạc</span> <span class="err">đườ</span><span class="n">ng</span><span class="o">&lt;/</span><span class="n">string</span><span class="p">&gt;</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>    <span class="p">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;description_off_route_detection&quot;</span><span class="o">&gt;</span><span class="n">Sử</span> <span class="n">dụng</span> <span class="n">lớp</span> <span class="n">RouteUtils</span> <span class="err">để</span> <span class="n">xác</span> <span class="err">đị</span><span class="n">nh</span> <span class="n">người</span> <span class="n">dùng</span> <span class="n">bị</span> <span class="n">lạc</span> <span class="err">đườ</span><span class="n">ng</span><span class="p">.</span><span class="o">&lt;/</span><span class="n">string</span><span class="p">&gt;</span>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>    <span class="p">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;title_reroute&quot;</span><span class="o">&gt;</span><span class="n">Tìm</span> <span class="err">Đườ</span><span class="n">ng</span> <span class="err">đ</span><span class="n">i</span> <span class="n">Mới</span><span class="o">&lt;/</span><span class="n">string</span><span class="p">&gt;</span>
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>    <span class="p">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;description_reroute&quot;</span><span class="o">&gt;</span><span class="n">Thử</span> <span class="n">chức</span> <span class="n">năng</span> <span class="n">tìm</span> <span class="err">đườ</span><span class="n">ng</span> <span class="err">đ</span><span class="n">i</span> <span class="n">mới</span> <span class="n">trong</span> <span class="n">SDK</span> <span class="err">Đ</span><span class="n">iều</span> <span class="n">hướng</span><span class="o">&lt;/</span><span class="n">string</span><span class="p">&gt;</span>
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>
<a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>    <span class="p">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;title_navigation_route_ui&quot;</span><span class="o">&gt;</span><span class="n">Tuyến</span> <span class="err">đườ</span><span class="n">ng</span> <span class="n">trên</span> <span class="n">Bản</span> <span class="err">đồ</span> <span class="err">Đ</span><span class="n">iều</span> <span class="n">hướng</span><span class="o">&lt;/</span><span class="n">string</span><span class="p">&gt;</span>
<a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>    <span class="p">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;description_navigation_route_ui&quot;</span><span class="o">&gt;</span><span class="n">Vẽ</span> <span class="n">tuyến</span> <span class="err">đườ</span><span class="n">ng</span> <span class="n">trên</span> <span class="n">bản</span> <span class="err">đồ</span><span class="o">&lt;/</span><span class="n">string</span><span class="p">&gt;</span>
<a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a>
<a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a>    <span class="p">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;title_navigation_launcher&quot;</span><span class="o">&gt;</span><span class="n">Trình</span> <span class="n">khởi</span> <span class="err">độ</span><span class="n">ng</span> <span class="err">Đ</span><span class="n">iều</span> <span class="n">hướng</span><span class="o">&lt;/</span><span class="n">string</span><span class="p">&gt;</span>
<a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a>    <span class="p">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;description_navigation_launcher&quot;</span><span class="o">&gt;</span><span class="n">Trải</span> <span class="n">nghiệm</span> <span class="n">giao</span> <span class="n">diện</span> <span class="n">người</span> <span class="n">dùng</span> <span class="n">có</span> <span class="n">thể</span> <span class="n">xen</span> <span class="n">vào</span><span class="o">&lt;/</span><span class="n">string</span><span class="p">&gt;</span>
<a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a>
<a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a>    <span class="p">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;title_end_navigation&quot;</span><span class="o">&gt;</span><span class="n">Kết</span> <span class="n">thúc</span> <span class="err">Đ</span><span class="n">iều</span> <span class="n">hướng</span><span class="o">&lt;/</span><span class="n">string</span><span class="p">&gt;</span>
<a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a>    <span class="p">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;description_end_navigation&quot;</span><span class="o">&gt;</span><span class="n">Cho</span> <span class="n">biết</span> <span class="n">cách</span> <span class="n">kết</span> <span class="n">thúc</span> <span class="err">đ</span><span class="n">iều</span> <span class="n">hướng</span> <span class="n">dùng</span> <span class="n">NavigationView</span><span class="o">&lt;/</span><span class="n">string</span><span class="p">&gt;</span>
<a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a>
<a id="__codelineno-7-19" name="__codelineno-7-19" href="#__codelineno-7-19"></a>    <span class="p">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;title_dual_navigation_map&quot;</span><span class="o">&gt;</span><span class="err">Đô</span><span class="n">i</span> <span class="n">Bản</span> <span class="err">đồ</span> <span class="err">Đ</span><span class="n">iều</span> <span class="n">hướng</span><span class="o">&lt;/</span><span class="n">string</span><span class="p">&gt;</span>
<a id="__codelineno-7-20" name="__codelineno-7-20" href="#__codelineno-7-20"></a>    <span class="p">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;description_dual_navigation_map&quot;</span><span class="o">&gt;</span><span class="n">Chỉ</span> <span class="n">cách</span> <span class="n">thêm</span> <span class="n">NavigationView</span> <span class="n">và</span> <span class="n">MapView</span> <span class="n">vào</span> <span class="n">cùng</span> <span class="n">bố</span> <span class="n">cục</span><span class="o">&lt;/</span><span class="n">string</span><span class="p">&gt;</span>
<a id="__codelineno-7-21" name="__codelineno-7-21" href="#__codelineno-7-21"></a>
<a id="__codelineno-7-22" name="__codelineno-7-22" href="#__codelineno-7-22"></a>    <span class="p">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;title_waypoint_navigation&quot;</span><span class="o">&gt;</span><span class="err">Đ</span><span class="n">iều</span> <span class="n">hướng</span> <span class="n">giữa</span> <span class="n">các</span> <span class="n">Tọa</span> <span class="err">độ</span> <span class="err">đ</span><span class="n">iểm</span><span class="o">&lt;/</span><span class="n">string</span><span class="p">&gt;</span>
<a id="__codelineno-7-23" name="__codelineno-7-23" href="#__codelineno-7-23"></a>    <span class="p">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;description_waypoint_navigation&quot;</span><span class="o">&gt;</span><span class="err">Đ</span><span class="n">iều</span> <span class="n">hướng</span> <span class="n">giữa</span> <span class="n">các</span> <span class="n">tọa</span> <span class="err">độ</span> <span class="err">đ</span><span class="n">iểm</span><span class="o">&lt;/</span><span class="n">string</span><span class="p">&gt;</span>
<a id="__codelineno-7-24" name="__codelineno-7-24" href="#__codelineno-7-24"></a>
<a id="__codelineno-7-25" name="__codelineno-7-25" href="#__codelineno-7-25"></a>    <span class="p">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;title_embedded_navigation&quot;</span><span class="o">&gt;</span><span class="err">Đ</span><span class="n">iều</span> <span class="n">hướng</span> <span class="err">đượ</span><span class="n">c</span> <span class="n">Nhúng</span><span class="o">&lt;/</span><span class="n">string</span><span class="p">&gt;</span>
<a id="__codelineno-7-26" name="__codelineno-7-26" href="#__codelineno-7-26"></a>    <span class="p">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;description_embedded_navigation&quot;</span><span class="o">&gt;</span><span class="err">Đ</span><span class="n">iều</span> <span class="n">hướng</span> <span class="n">trong</span> <span class="n">khung</span> <span class="n">nhìn</span> <span class="n">chứa</span> <span class="n">các</span> <span class="n">khung</span> <span class="n">nhìn</span> <span class="n">khác</span><span class="o">&lt;/</span><span class="n">string</span><span class="p">&gt;</span>
<a id="__codelineno-7-27" name="__codelineno-7-27" href="#__codelineno-7-27"></a>
<a id="__codelineno-7-28" name="__codelineno-7-28" href="#__codelineno-7-28"></a>    <span class="p">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;title_fragment_navigation&quot;</span><span class="o">&gt;</span><span class="n">NavigationView</span> <span class="n">thực</span> <span class="n">hiện</span> <span class="n">bằng</span> <span class="n">Fragment</span><span class="o">&lt;/</span><span class="n">string</span><span class="p">&gt;</span>
<a id="__codelineno-7-29" name="__codelineno-7-29" href="#__codelineno-7-29"></a>    <span class="p">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;description_fragment_navigation&quot;</span><span class="o">&gt;</span><span class="n">NavigationView</span> <span class="n">thực</span> <span class="n">hiện</span> <span class="n">bằng</span> <span class="n">Fragment</span><span class="o">&lt;/</span><span class="n">string</span><span class="p">&gt;</span>
<a id="__codelineno-7-30" name="__codelineno-7-30" href="#__codelineno-7-30"></a>
<a id="__codelineno-7-31" name="__codelineno-7-31" href="#__codelineno-7-31"></a>    <span class="p">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;settings&quot;</span><span class="o">&gt;</span><span class="n">Thiết</span> <span class="n">lập</span><span class="o">&lt;/</span><span class="n">string</span><span class="p">&gt;</span>
<a id="__codelineno-7-32" name="__codelineno-7-32" href="#__codelineno-7-32"></a>    <span class="p">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;simulate_route&quot;</span><span class="o">&gt;</span><span class="n">Mô</span> <span class="n">phỏng</span> <span class="n">Tuyến</span> <span class="err">đườ</span><span class="n">ng</span><span class="o">&lt;/</span><span class="n">string</span><span class="p">&gt;</span>
<a id="__codelineno-7-33" name="__codelineno-7-33" href="#__codelineno-7-33"></a>    <span class="p">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;language&quot;</span><span class="o">&gt;</span><span class="n">Ngôn</span> <span class="n">ngữ</span><span class="o">&lt;/</span><span class="n">string</span><span class="p">&gt;</span>
<a id="__codelineno-7-34" name="__codelineno-7-34" href="#__codelineno-7-34"></a>    <span class="p">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;unit_type&quot;</span><span class="o">&gt;</span><span class="n">Hệ</span> <span class="err">Đ</span><span class="n">o</span> <span class="n">lường</span><span class="o">&lt;/</span><span class="n">string</span><span class="p">&gt;</span>
<a id="__codelineno-7-35" name="__codelineno-7-35" href="#__codelineno-7-35"></a>    <span class="p">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;route_profile&quot;</span><span class="o">&gt;</span><span class="n">Chế</span> <span class="err">độ</span><span class="o">&lt;/</span><span class="n">string</span><span class="p">&gt;</span>
<a id="__codelineno-7-36" name="__codelineno-7-36" href="#__codelineno-7-36"></a>
<a id="__codelineno-7-37" name="__codelineno-7-37" href="#__codelineno-7-37"></a>    <span class="p">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;error_route_not_available&quot;</span><span class="o">&gt;</span><span class="n">Tuyến</span> <span class="err">đườ</span><span class="n">ng</span> <span class="n">hiện</span> <span class="n">tại</span> <span class="n">không</span> <span class="n">có</span> <span class="n">sẵn</span><span class="o">&lt;/</span><span class="n">string</span><span class="p">&gt;</span>
<a id="__codelineno-7-38" name="__codelineno-7-38" href="#__codelineno-7-38"></a>    <span class="p">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;error_select_longer_route&quot;</span><span class="o">&gt;</span><span class="n">Vui</span> <span class="n">lòng</span> <span class="n">chọn</span> <span class="n">một</span> <span class="n">tuyến</span> <span class="err">đườ</span><span class="n">ng</span> <span class="n">dài</span> <span class="n">hơn</span><span class="o">&lt;/</span><span class="n">string</span><span class="p">&gt;</span>
<a id="__codelineno-7-39" name="__codelineno-7-39" href="#__codelineno-7-39"></a>    <span class="p">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;error_valid_route_not_found&quot;</span><span class="o">&gt;</span><span class="n">Không</span> <span class="n">tìm</span> <span class="n">thấy</span> <span class="n">tuyến</span> <span class="err">đ</span><span class="n">i</span> <span class="err">đượ</span><span class="n">c</span><span class="p">.</span><span class="o">&lt;/</span><span class="n">string</span><span class="p">&gt;</span>
<a id="__codelineno-7-40" name="__codelineno-7-40" href="#__codelineno-7-40"></a>    <span class="p">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;explanation_long_press_waypoint&quot;</span><span class="o">&gt;</span><span class="n">Chạm</span> <span class="n">lâu</span> <span class="n">vào</span> <span class="n">bản</span> <span class="err">đồ</span> <span class="err">để</span> <span class="n">thả</span> <span class="n">ghim</span> <span class="n">tọa</span> <span class="err">độ</span> <span class="err">đ</span><span class="n">iểm</span><span class="o">&lt;/</span><span class="n">string</span><span class="p">&gt;</span>
<a id="__codelineno-7-41" name="__codelineno-7-41" href="#__codelineno-7-41"></a>
<a id="__codelineno-7-42" name="__codelineno-7-42" href="#__codelineno-7-42"></a>    <span class="p">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;title_navigation_ui&quot;</span><span class="o">&gt;</span><span class="n">Navigation</span> <span class="n">UI</span><span class="o">&lt;/</span><span class="n">string</span><span class="p">&gt;</span>
<a id="__codelineno-7-43" name="__codelineno-7-43" href="#__codelineno-7-43"></a>    <span class="p">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;description_navigation_ui&quot;</span><span class="o">&gt;</span><span class="n">Showcase</span> <span class="n">a</span> <span class="n">Navigation</span> <span class="n">UI</span> <span class="n">session</span><span class="p">.</span> <span class="nb">Optional</span> <span class="n">with</span> <span class="n">simulation</span><span class="p">.</span><span class="o">&lt;/</span><span class="n">string</span><span class="p">&gt;</span>
<a id="__codelineno-7-44" name="__codelineno-7-44" href="#__codelineno-7-44"></a>
<a id="__codelineno-7-45" name="__codelineno-7-45" href="#__codelineno-7-45"></a>
<a id="__codelineno-7-46" name="__codelineno-7-46" href="#__codelineno-7-46"></a>    <span class="p">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;title_component_navigation&quot;</span><span class="o">&gt;</span><span class="n">MapboxNavigation</span> <span class="n">with</span> <span class="n">UI</span> <span class="n">components</span><span class="o">&lt;/</span><span class="n">string</span><span class="p">&gt;</span>
<a id="__codelineno-7-47" name="__codelineno-7-47" href="#__codelineno-7-47"></a>    <span class="p">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;description_component_navigation&quot;</span><span class="o">&gt;</span><span class="n">MapboxNavigation</span> <span class="n">with</span> <span class="n">UI</span> <span class="n">components</span><span class="o">&lt;/</span><span class="n">string</span><span class="p">&gt;</span>
<a id="__codelineno-7-48" name="__codelineno-7-48" href="#__codelineno-7-48"></a>
<a id="__codelineno-7-49" name="__codelineno-7-49" href="#__codelineno-7-49"></a>    <span class="p">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;unit_type_key&quot;</span> <span class="n">translatable</span><span class="p">=</span><span class="s">&quot;false&quot;</span><span class="o">&gt;</span><span class="n">unit_type</span><span class="o">&lt;/</span><span class="n">string</span><span class="p">&gt;</span>
<a id="__codelineno-7-50" name="__codelineno-7-50" href="#__codelineno-7-50"></a>    <span class="p">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;simulate_route_key&quot;</span> <span class="n">translatable</span><span class="p">=</span><span class="s">&quot;false&quot;</span><span class="o">&gt;</span><span class="n">simulate_route</span><span class="o">&lt;/</span><span class="n">string</span><span class="p">&gt;</span>
<a id="__codelineno-7-51" name="__codelineno-7-51" href="#__codelineno-7-51"></a>    <span class="p">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;language_key&quot;</span> <span class="n">translatable</span><span class="p">=</span><span class="s">&quot;false&quot;</span><span class="o">&gt;</span><span class="n">language</span><span class="o">&lt;/</span><span class="n">string</span><span class="p">&gt;</span>
<a id="__codelineno-7-52" name="__codelineno-7-52" href="#__codelineno-7-52"></a>    <span class="p">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;route_profile_key&quot;</span> <span class="n">translatable</span><span class="p">=</span><span class="s">&quot;false&quot;</span><span class="o">&gt;</span><span class="n">route_profile</span><span class="o">&lt;/</span><span class="n">string</span><span class="p">&gt;</span>
<a id="__codelineno-7-53" name="__codelineno-7-53" href="#__codelineno-7-53"></a>    <span class="p">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;default_locale&quot;</span> <span class="n">translatable</span><span class="p">=</span><span class="s">&quot;false&quot;</span><span class="o">&gt;</span><span class="n">default_for_device</span><span class="o">&lt;/</span><span class="n">string</span><span class="p">&gt;</span>
<a id="__codelineno-7-54" name="__codelineno-7-54" href="#__codelineno-7-54"></a>    <span class="p">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;default_unit_type&quot;</span> <span class="n">translatable</span><span class="p">=</span><span class="s">&quot;false&quot;</span><span class="o">&gt;</span><span class="n">default_for_device</span><span class="o">&lt;/</span><span class="n">string</span><span class="p">&gt;</span>
<a id="__codelineno-7-55" name="__codelineno-7-55" href="#__codelineno-7-55"></a>    <span class="p">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;current_night_mode&quot;</span> <span class="n">translatable</span><span class="p">=</span><span class="s">&quot;false&quot;</span><span class="o">&gt;</span><span class="n">current_night_mode</span><span class="o">&lt;/</span><span class="n">string</span><span class="p">&gt;</span>
<a id="__codelineno-7-56" name="__codelineno-7-56" href="#__codelineno-7-56"></a>
<a id="__codelineno-7-57" name="__codelineno-7-57" href="#__codelineno-7-57"></a>    <span class="p">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;new_location&quot;</span><span class="o">&gt;</span><span class="n">Vĩ</span> <span class="err">độ</span><span class="p">:</span> <span class="o">%</span><span class="mi">1</span><span class="err">$</span><span class="n">s</span> <span class="n">Kinh</span> <span class="err">độ</span><span class="p">:</span> <span class="o">%</span><span class="mi">2</span><span class="err">$</span><span class="n">s</span><span class="o">&lt;/</span><span class="n">string</span><span class="p">&gt;</span>
<a id="__codelineno-7-58" name="__codelineno-7-58" href="#__codelineno-7-58"></a>    <span class="p">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;map_view_style_url&quot;</span> <span class="n">translatable</span><span class="p">=</span><span class="s">&quot;false&quot;</span><span class="o">&gt;</span><span class="n">YOUR_STYLE_URL_HERE</span><span class="o">&lt;/</span><span class="n">string</span><span class="p">&gt;</span>
<a id="__codelineno-7-59" name="__codelineno-7-59" href="#__codelineno-7-59"></a>
<a id="__codelineno-7-60" name="__codelineno-7-60" href="#__codelineno-7-60"></a>    <span class="p">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;user_location_permission_explanation&quot;</span><span class="o">&gt;</span><span class="err">Ứ</span><span class="n">ng</span> <span class="n">dụng</span> <span class="n">này</span> <span class="n">cần</span> <span class="n">sử</span> <span class="n">dụng</span> <span class="n">quyền</span> <span class="n">vị</span> <span class="n">trí</span> <span class="err">để</span> <span class="n">hoạt</span> <span class="err">độ</span><span class="n">ng</span> <span class="n">chính</span> <span class="n">xác</span><span class="p">.</span><span class="o">&lt;/</span><span class="n">string</span><span class="p">&gt;</span>
<a id="__codelineno-7-61" name="__codelineno-7-61" href="#__codelineno-7-61"></a>    <span class="p">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="p">=</span><span class="s">&quot;user_location_permission_not_granted&quot;</span><span class="o">&gt;</span><span class="n">Bạn</span> <span class="n">chưa</span> <span class="n">cung</span> <span class="n">cấp</span> <span class="n">quyền</span> <span class="n">vị</span> <span class="n">trí</span><span class="p">.</span><span class="o">&lt;/</span><span class="n">string</span><span class="p">&gt;</span>
</code></pre></div></p>
<p><strong>Note</strong>: add the styleUrl at the location "YOUR_STYLE_URL_HERE" for the map_view_style_url key to run navigation.</p>
<h2 id="create-a-navigationactivity-to-utilize-the-sdk">Create a NavigationActivity to utilize the SDK<a class="headerlink" href="#create-a-navigationactivity-to-utilize-the-sdk" title="Permanent link">&para;</a></h2>
<p>Create a new activity named <code>VietMapNavigationActivity</code>.</p>
<p>To create a new activity named <code>VietMapNavigationActivity</code> in your Android project, follow these steps:
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="o">&lt;?</span><span class="n">xml</span> <span class="n">version</span><span class="p">=</span><span class="s">&quot;1.0&quot;</span> <span class="n">encoding</span><span class="p">=</span><span class="s">&quot;utf-8&quot;</span><span class="p">?</span><span class="o">&gt;</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="p">&lt;</span><span class="n">androidx</span><span class="p">.</span><span class="n">constraintlayout</span><span class="p">.</span><span class="n">widget</span><span class="p">.</span><span class="n">ConstraintLayout</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>    <span class="n">xmlns</span><span class="p">:</span><span class="n">android</span><span class="p">=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>    <span class="n">xmlns</span><span class="p">:</span><span class="n">app</span><span class="p">=</span><span class="s">&quot;http://schemas.android.com/apk/res-auto&quot;</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>    <span class="n">android</span><span class="p">:</span><span class="n">layout_width</span><span class="p">=</span><span class="s">&quot;match_parent&quot;</span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>    <span class="n">android</span><span class="p">:</span><span class="n">layout_height</span><span class="p">=</span><span class="s">&quot;match_parent&quot;</span>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a>    <span class="n">android</span><span class="p">:</span><span class="n">id</span><span class="p">=</span><span class="s">&quot;@+id/vietmapNavigation&quot;</span><span class="o">&gt;</span>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a>    <span class="p">&lt;</span><span class="n">com</span><span class="p">.</span><span class="n">mapbox</span><span class="p">.</span><span class="n">services</span><span class="p">.</span><span class="n">android</span><span class="p">.</span><span class="n">navigation</span><span class="p">.</span><span class="n">ui</span><span class="p">.</span><span class="n">v5</span><span class="p">.</span><span class="n">NavigationView</span>
<a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a>        <span class="n">android</span><span class="p">:</span><span class="n">id</span><span class="p">=</span><span class="s">&quot;@+id/navigationView&quot;</span>
<a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a>        <span class="n">android</span><span class="p">:</span><span class="n">layout_width</span><span class="p">=</span><span class="s">&quot;match_parent&quot;</span>
<a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a>        <span class="n">android</span><span class="p">:</span><span class="n">layout_height</span><span class="p">=</span><span class="s">&quot;0dp&quot;</span>
<a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a>        <span class="n">android</span><span class="p">:</span><span class="n">visibility</span><span class="p">=</span><span class="s">&quot;invisible&quot;</span>
<a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a>        <span class="n">app</span><span class="p">:</span><span class="n">maplibre_cameraZoom</span><span class="p">=</span><span class="s">&quot;16&quot;</span>
<a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a>        <span class="n">app</span><span class="p">:</span><span class="n">layout_constraintHeight_percent</span><span class="p">=</span><span class="s">&quot;0.5&quot;</span>
<a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a>        <span class="n">app</span><span class="p">:</span><span class="n">layout_constraintTop_toTopOf</span><span class="p">=</span><span class="s">&quot;parent&quot;</span>
<a id="__codelineno-8-17" name="__codelineno-8-17" href="#__codelineno-8-17"></a>        <span class="n">app</span><span class="p">:</span><span class="n">navigationDarkTheme</span><span class="p">=</span><span class="s">&quot;@style/NavigationViewDark&quot;</span>
<a id="__codelineno-8-18" name="__codelineno-8-18" href="#__codelineno-8-18"></a>        <span class="n">app</span><span class="p">:</span><span class="n">navigationLightTheme</span><span class="p">=</span><span class="s">&quot;@style/NavigationViewLight&quot;</span><span class="o">/&gt;</span>
<a id="__codelineno-8-19" name="__codelineno-8-19" href="#__codelineno-8-19"></a>
<a id="__codelineno-8-20" name="__codelineno-8-20" href="#__codelineno-8-20"></a>    <span class="p">&lt;</span><span class="n">com</span><span class="p">.</span><span class="n">mapbox</span><span class="p">.</span><span class="n">mapboxsdk</span><span class="p">.</span><span class="n">maps</span><span class="p">.</span><span class="n">MapView</span>
<a id="__codelineno-8-21" name="__codelineno-8-21" href="#__codelineno-8-21"></a>        <span class="n">android</span><span class="p">:</span><span class="n">id</span><span class="p">=</span><span class="s">&quot;@+id/mapView&quot;</span>
<a id="__codelineno-8-22" name="__codelineno-8-22" href="#__codelineno-8-22"></a>        <span class="n">android</span><span class="p">:</span><span class="n">layout_width</span><span class="p">=</span><span class="s">&quot;match_parent&quot;</span>
<a id="__codelineno-8-23" name="__codelineno-8-23" href="#__codelineno-8-23"></a>        <span class="n">android</span><span class="p">:</span><span class="n">layout_height</span><span class="p">=</span><span class="s">&quot;0dp&quot;</span>
<a id="__codelineno-8-24" name="__codelineno-8-24" href="#__codelineno-8-24"></a>        <span class="n">app</span><span class="p">:</span><span class="n">maplibre_cameraZoom</span><span class="p">=</span><span class="s">&quot;16&quot;</span>
<a id="__codelineno-8-25" name="__codelineno-8-25" href="#__codelineno-8-25"></a>        <span class="n">android</span><span class="p">:</span><span class="n">visibility</span><span class="p">=</span><span class="s">&quot;visible&quot;</span>
<a id="__codelineno-8-26" name="__codelineno-8-26" href="#__codelineno-8-26"></a>        <span class="n">app</span><span class="p">:</span><span class="n">layout_constraintTop_toTopOf</span><span class="p">=</span><span class="s">&quot;parent&quot;</span>
<a id="__codelineno-8-27" name="__codelineno-8-27" href="#__codelineno-8-27"></a>        <span class="n">app</span><span class="p">:</span><span class="n">layout_constraintBottom_toBottomOf</span><span class="p">=</span><span class="s">&quot;parent&quot;</span>
<a id="__codelineno-8-28" name="__codelineno-8-28" href="#__codelineno-8-28"></a>        <span class="n">app</span><span class="p">:</span><span class="n">layout_constraintHeight_percent</span><span class="p">=</span><span class="s">&quot;1&quot;</span><span class="o">/&gt;</span>
<a id="__codelineno-8-29" name="__codelineno-8-29" href="#__codelineno-8-29"></a>
<a id="__codelineno-8-30" name="__codelineno-8-30" href="#__codelineno-8-30"></a>    <span class="p">&lt;</span><span class="n">ProgressBar</span>
<a id="__codelineno-8-31" name="__codelineno-8-31" href="#__codelineno-8-31"></a>        <span class="n">android</span><span class="p">:</span><span class="n">id</span><span class="p">=</span><span class="s">&quot;@+id/loading&quot;</span>
<a id="__codelineno-8-32" name="__codelineno-8-32" href="#__codelineno-8-32"></a>        <span class="n">style</span><span class="p">=</span><span class="s">&quot;?android:attr/progressBarStyle&quot;</span>
<a id="__codelineno-8-33" name="__codelineno-8-33" href="#__codelineno-8-33"></a>        <span class="n">android</span><span class="p">:</span><span class="n">layout_width</span><span class="p">=</span><span class="s">&quot;wrap_content&quot;</span>
<a id="__codelineno-8-34" name="__codelineno-8-34" href="#__codelineno-8-34"></a>        <span class="n">android</span><span class="p">:</span><span class="n">layout_height</span><span class="p">=</span><span class="s">&quot;wrap_content&quot;</span>
<a id="__codelineno-8-35" name="__codelineno-8-35" href="#__codelineno-8-35"></a>        <span class="n">android</span><span class="p">:</span><span class="n">indeterminate</span><span class="p">=</span><span class="s">&quot;true&quot;</span>
<a id="__codelineno-8-36" name="__codelineno-8-36" href="#__codelineno-8-36"></a>        <span class="n">android</span><span class="p">:</span><span class="n">visibility</span><span class="p">=</span><span class="s">&quot;invisible&quot;</span>
<a id="__codelineno-8-37" name="__codelineno-8-37" href="#__codelineno-8-37"></a>        <span class="n">app</span><span class="p">:</span><span class="n">layout_constraintBottom_toBottomOf</span><span class="p">=</span><span class="s">&quot;parent&quot;</span>
<a id="__codelineno-8-38" name="__codelineno-8-38" href="#__codelineno-8-38"></a>        <span class="n">app</span><span class="p">:</span><span class="n">layout_constraintEnd_toEndOf</span><span class="p">=</span><span class="s">&quot;parent&quot;</span>
<a id="__codelineno-8-39" name="__codelineno-8-39" href="#__codelineno-8-39"></a>        <span class="n">app</span><span class="p">:</span><span class="n">layout_constraintStart_toStartOf</span><span class="p">=</span><span class="s">&quot;parent&quot;</span>
<a id="__codelineno-8-40" name="__codelineno-8-40" href="#__codelineno-8-40"></a>        <span class="n">app</span><span class="p">:</span><span class="n">layout_constraintTop_toTopOf</span><span class="p">=</span><span class="s">&quot;parent&quot;</span><span class="o">/&gt;</span>
<a id="__codelineno-8-41" name="__codelineno-8-41" href="#__codelineno-8-41"></a>
<a id="__codelineno-8-42" name="__codelineno-8-42" href="#__codelineno-8-42"></a>    <span class="p">&lt;</span><span class="n">com</span><span class="p">.</span><span class="n">google</span><span class="p">.</span><span class="n">android</span><span class="p">.</span><span class="n">material</span><span class="p">.</span><span class="n">floatingactionbutton</span><span class="p">.</span><span class="n">FloatingActionButton</span>
<a id="__codelineno-8-43" name="__codelineno-8-43" href="#__codelineno-8-43"></a>        <span class="n">android</span><span class="p">:</span><span class="n">id</span><span class="p">=</span><span class="s">&quot;@+id/launchNavigation&quot;</span>
<a id="__codelineno-8-44" name="__codelineno-8-44" href="#__codelineno-8-44"></a>        <span class="n">android</span><span class="p">:</span><span class="n">layout_width</span><span class="p">=</span><span class="s">&quot;wrap_content&quot;</span>
<a id="__codelineno-8-45" name="__codelineno-8-45" href="#__codelineno-8-45"></a>        <span class="n">android</span><span class="p">:</span><span class="n">layout_height</span><span class="p">=</span><span class="s">&quot;wrap_content&quot;</span>
<a id="__codelineno-8-46" name="__codelineno-8-46" href="#__codelineno-8-46"></a>        <span class="n">android</span><span class="p">:</span><span class="n">layout_marginBottom</span><span class="p">=</span><span class="s">&quot;16dp&quot;</span>
<a id="__codelineno-8-47" name="__codelineno-8-47" href="#__codelineno-8-47"></a>        <span class="n">android</span><span class="p">:</span><span class="n">layout_marginEnd</span><span class="p">=</span><span class="s">&quot;16dp&quot;</span>
<a id="__codelineno-8-48" name="__codelineno-8-48" href="#__codelineno-8-48"></a>        <span class="n">android</span><span class="p">:</span><span class="n">layout_marginRight</span><span class="p">=</span><span class="s">&quot;16dp&quot;</span>
<a id="__codelineno-8-49" name="__codelineno-8-49" href="#__codelineno-8-49"></a>        <span class="n">android</span><span class="p">:</span><span class="n">src</span><span class="p">=</span><span class="s">&quot;@drawable/ic_navigation&quot;</span>
<a id="__codelineno-8-50" name="__codelineno-8-50" href="#__codelineno-8-50"></a>        <span class="n">android</span><span class="p">:</span><span class="n">tint</span><span class="p">=</span><span class="s">&quot;@android:color/white&quot;</span>
<a id="__codelineno-8-51" name="__codelineno-8-51" href="#__codelineno-8-51"></a>        <span class="n">android</span><span class="p">:</span><span class="n">visibility</span><span class="p">=</span><span class="s">&quot;invisible&quot;</span>
<a id="__codelineno-8-52" name="__codelineno-8-52" href="#__codelineno-8-52"></a>        <span class="n">app</span><span class="p">:</span><span class="n">backgroundTint</span><span class="p">=</span><span class="s">&quot;@color/colorPrimary&quot;</span>
<a id="__codelineno-8-53" name="__codelineno-8-53" href="#__codelineno-8-53"></a>        <span class="n">app</span><span class="p">:</span><span class="n">layout_constraintBottom_toBottomOf</span><span class="p">=</span><span class="s">&quot;parent&quot;</span>
<a id="__codelineno-8-54" name="__codelineno-8-54" href="#__codelineno-8-54"></a>        <span class="n">app</span><span class="p">:</span><span class="n">layout_constraintEnd_toEndOf</span><span class="p">=</span><span class="s">&quot;parent&quot;</span><span class="o">/&gt;</span>
<a id="__codelineno-8-55" name="__codelineno-8-55" href="#__codelineno-8-55"></a><span class="o">&lt;/</span><span class="n">androidx</span><span class="p">.</span><span class="n">constraintlayout</span><span class="p">.</span><span class="n">widget</span><span class="p">.</span><span class="n">ConstraintLayout</span><span class="p">&gt;</span>
</code></pre></div>
 <code>VietMapNavigationActivity</code> needs to implement several listener classes below to capture events and handle them during the SDK navigation process.
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="kd">public</span> <span class="kd">class</span> <span class="nc">VietMapNavigationMapActivity</span> <span class="n">extends</span> <span class="n">AppCompatActivity</span> <span class="n">implements</span> 
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>        <span class="n">OnNavigationReadyCallback</span><span class="p">,</span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>        <span class="n">ProgressChangeListener</span><span class="p">,</span>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>        <span class="n">NavigationListener</span><span class="p">,</span>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>        <span class="n">Callback</span><span class="p">&lt;</span><span class="n">DirectionsResponse</span><span class="p">&gt;,</span>
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>        <span class="n">OnMapReadyCallback</span><span class="p">,</span>
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a>        <span class="n">MapboxMap</span><span class="p">.</span><span class="n">OnMapClickListener</span><span class="p">,</span>
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a>        <span class="n">MapboxMap</span><span class="p">.</span><span class="n">OnMapLongClickListener</span><span class="p">,</span>
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a>        <span class="n">MapboxMap</span><span class="p">.</span><span class="n">OnMoveListener</span><span class="p">,</span>
<a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a>        <span class="n">OnRouteSelectionChangeListener</span><span class="p">,</span>
<a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a>        <span class="n">OffRouteListener</span><span class="p">,</span> 
<a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a>        <span class="n">RouteListener</span><span class="p">,</span> <span class="n">NavigationEventListener</span> 
<a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a><span class="p">{</span>
<a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a>    <span class="p">@</span><span class="n">Override</span>
<a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a>    <span class="n">protected</span> <span class="n">void</span> <span class="n">onCreate</span><span class="p">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a>        <span class="c1">//Hàm Mapbox.getInstance cần được gọi ngay khi khởi tạo activity</span>
<a id="__codelineno-9-17" name="__codelineno-9-17" href="#__codelineno-9-17"></a>        <span class="n">Mapbox</span><span class="p">.</span><span class="n">getInstance</span><span class="p">(</span><span class="n">this</span><span class="p">);</span>
<a id="__codelineno-9-18" name="__codelineno-9-18" href="#__codelineno-9-18"></a>        <span class="kc">super</span><span class="p">.</span><span class="n">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">);</span>
<a id="__codelineno-9-19" name="__codelineno-9-19" href="#__codelineno-9-19"></a>    <span class="p">}</span>
<a id="__codelineno-9-20" name="__codelineno-9-20" href="#__codelineno-9-20"></a><span class="p">}</span>
</code></pre></div>
<strong>Note</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="o">*</span> <span class="n">OnNavigationReadyCallback</span><span class="p">:</span> <span class="n">Listens</span> <span class="n">when</span> <span class="n">the</span> <span class="n">SDK</span> <span class="n">starts</span> <span class="n">navigation</span><span class="p">.</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="o">*</span> <span class="n">ProgressChangeListener</span><span class="p">(</span><span class="n">location</span><span class="p">,</span> <span class="n">routeProgress</span><span class="p">):</span> <span class="n">Continuously</span> <span class="n">listens</span> <span class="n">to</span> <span class="n">the</span> <span class="n">user</span><span class="err">&#39;</span><span class="n">s</span> <span class="n">current</span> <span class="n">location</span><span class="p">,</span> <span class="n">current</span> <span class="n">route</span> <span class="n">information</span><span class="p">,</span> <span class="n">next</span> <span class="n">route</span><span class="p">,</span> <span class="n">and</span> <span class="n">remaining</span> <span class="bp">distance</span> <span class="n">that</span> <span class="n">the</span> <span class="n">user</span> <span class="n">needs</span> <span class="n">to</span> <span class="n">travel</span><span class="p">.</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="o">*</span> <span class="n">NavigationListener</span><span class="p">:</span> <span class="n">Includes</span> <span class="n">three</span> <span class="n">functions</span><span class="p">:</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a> <span class="o">-</span> <span class="n">onCancelNavigation</span><span class="p">:</span> <span class="n">Listens</span> <span class="n">when</span> <span class="n">the</span> <span class="n">user</span> <span class="n">cancels</span> <span class="n">the</span> <span class="n">navigation</span><span class="p">.</span>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a> <span class="o">-</span> <span class="n">onNavigationFinished</span><span class="p">:</span> <span class="n">Listens</span> <span class="n">when</span> <span class="n">the</span> <span class="n">user</span> <span class="n">completes</span> <span class="n">the</span> <span class="n">journey</span><span class="p">.</span>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="o">*</span> <span class="n">onNavigationRunning</span><span class="p">:</span> <span class="n">Listens</span> <span class="n">when</span> <span class="n">the</span> <span class="n">user</span> <span class="k">is</span> <span class="n">actively</span> <span class="n">navigating</span><span class="p">.</span>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="o">*</span> <span class="n">Callback</span><span class="p">(</span><span class="n">DirectionsResponse</span><span class="p">):</span> <span class="n">Returns</span> <span class="n">the</span> <span class="n">result</span> <span class="n">when</span> <span class="n">the</span> <span class="n">getRoute</span> <span class="n">operation</span> <span class="k">is</span> <span class="n">completed</span><span class="p">.</span>
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="o">*</span> <span class="n">OnMapReadyCallback</span><span class="p">:</span> <span class="n">Listens</span> <span class="n">when</span> <span class="n">the</span> <span class="bp">map</span> <span class="n">initialization</span> <span class="k">is</span> <span class="n">completed</span> <span class="n">and</span> <span class="n">applies</span> <span class="n">the</span> <span class="n">style</span> <span class="n">to</span> <span class="n">the</span> <span class="bp">map</span><span class="p">.</span>
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="o">*</span> <span class="n">MapboxMap</span><span class="p">.</span><span class="n">OnMapClickListener</span><span class="p">,</span> <span class="n">MapboxMap</span><span class="p">.</span><span class="n">OnMapLongClickListener</span><span class="p">,</span> <span class="n">MapboxMap</span><span class="p">.</span><span class="n">OnMoveListener</span><span class="p">:</span> <span class="n">Listen</span> <span class="n">to</span> <span class="bp">map</span> <span class="n">events</span> <span class="n">such</span> <span class="k">as</span> <span class="n">click</span><span class="p">,</span> <span class="n">long</span> <span class="n">click</span><span class="p">,</span> <span class="n">and</span> <span class="n">move</span><span class="p">.</span>
<a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="o">*</span> <span class="n">OnRouteSelectionChangeListener</span><span class="p">(</span><span class="n">DirectionsRoute</span> <span class="n">newRouteSelected</span><span class="p">):</span>
<a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="o">*</span> <span class="n">onNewPrimaryRouteSelected</span><span class="p">:</span> <span class="n">Listens</span> <span class="n">when</span> <span class="n">the</span> <span class="n">user</span> <span class="n">selects</span> <span class="n">a</span> <span class="n">different</span> <span class="n">route</span> <span class="n">from</span> <span class="n">the</span> <span class="n">current</span> <span class="n">route</span> <span class="n">and</span> <span class="n">returns</span> <span class="n">the</span> <span class="n">newly</span> <span class="n">selected</span> <span class="n">route</span><span class="p">.</span>
<a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="o">*</span> <span class="n">OffRouteListener</span><span class="p">:</span> <span class="n">Listens</span> <span class="n">when</span> <span class="n">the</span> <span class="n">user</span> <span class="n">deviates</span> <span class="n">from</span> <span class="n">the</span> <span class="n">intended</span> <span class="n">route</span> <span class="n">and</span> <span class="n">needs</span> <span class="n">to</span> <span class="bp">find</span> <span class="n">an</span> <span class="n">alternative</span> <span class="n">route</span> <span class="n">based</span> <span class="n">on</span> <span class="n">the</span> <span class="n">user</span><span class="err">&#39;</span><span class="n">s</span> <span class="n">current</span> <span class="n">location</span><span class="p">.</span>
<a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a><span class="o">*</span> <span class="n">userOffRoute</span><span class="p">(</span><span class="n">Location</span> <span class="n">currentLocation</span><span class="p">):</span> <span class="n">Called</span> <span class="n">when</span> <span class="n">the</span> <span class="n">user</span> <span class="n">deviates</span> <span class="n">from</span> <span class="n">the</span> <span class="n">intended</span> <span class="n">route</span><span class="p">,</span> <span class="n">providing</span> <span class="n">the</span> <span class="n">current</span> <span class="n">location</span> <span class="n">to</span> <span class="bp">find</span> <span class="n">a</span> <span class="n">new</span> <span class="n">route</span><span class="p">.</span>
<a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a><span class="o">*</span> <span class="n">RouteListener</span><span class="p">:</span> <span class="n">Listens</span> <span class="n">when</span> <span class="n">the</span> <span class="n">user</span> <span class="n">arrives</span> <span class="n">at</span> <span class="n">the</span> <span class="n">destination</span><span class="p">.</span>
<a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a><span class="o">*</span> <span class="n">onArrival</span><span class="p">():</span> <span class="n">Called</span> <span class="n">when</span> <span class="n">the</span> <span class="n">user</span> <span class="n">reaches</span> <span class="n">the</span> <span class="n">destination</span><span class="p">.</span>
</code></pre></div></p>
<p><strong>Declare the necessary variables:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>    <span class="kd">private</span> <span class="kd">static</span> <span class="kr">final</span> <span class="n">int</span> <span class="n">DEFAULT_CAMERA_ZOOM</span> <span class="p">=</span> <span class="mi">20</span><span class="p">;</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>    <span class="kd">private</span> <span class="n">ConstraintLayout</span> <span class="n">customUINavigation</span><span class="p">;</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>    <span class="kd">private</span> <span class="n">NavigationView</span> <span class="n">navigationView</span><span class="p">;</span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>    <span class="kd">private</span> <span class="n">MapView</span> <span class="n">mapView</span><span class="p">;</span>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>    <span class="kd">private</span> <span class="n">ProgressBar</span> <span class="n">loading</span><span class="p">;</span>
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>    <span class="kd">private</span> <span class="n">FloatingActionButton</span> <span class="n">launchNavigationFab</span><span class="p">;</span>
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>    <span class="kd">private</span> <span class="n">Point</span> <span class="n">origin</span> <span class="p">=</span> <span class="n">Point</span><span class="p">.</span><span class="n">fromLngLat</span><span class="p">(</span><span class="mf">106.675789</span><span class="p">,</span> <span class="mf">10.759050</span><span class="p">);</span>
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>    <span class="kd">private</span> <span class="n">Point</span> <span class="n">destination</span> <span class="p">=</span> <span class="n">Point</span><span class="p">.</span><span class="n">fromLngLat</span><span class="p">(</span><span class="mf">106.686777</span><span class="p">,</span> <span class="mf">10.775056</span><span class="p">);</span>
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a>    <span class="kd">private</span> <span class="n">DirectionsRoute</span> <span class="n">route</span><span class="p">;</span>
<a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a>    <span class="kd">private</span> <span class="n">boolean</span> <span class="n">isNavigationRunning</span><span class="p">;</span>
<a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a>    <span class="kd">private</span> <span class="n">MapboxNavigation</span> <span class="n">mapboxNavigation</span><span class="p">;</span>
<a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a>    <span class="kd">private</span> <span class="n">LocationEngine</span> <span class="n">locationEngine</span><span class="p">;</span>
<a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a>    <span class="kd">private</span> <span class="n">NavigationMapRoute</span> <span class="n">mapRoute</span><span class="p">;</span>
<a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a>    <span class="kd">private</span> <span class="n">MapboxMap</span> <span class="n">mapboxMap</span><span class="p">;</span>
<a id="__codelineno-11-15" name="__codelineno-11-15" href="#__codelineno-11-15"></a>    <span class="kd">private</span> <span class="n">ConstraintSet</span> <span class="n">navigationMapConstraint</span><span class="p">;</span>
<a id="__codelineno-11-16" name="__codelineno-11-16" href="#__codelineno-11-16"></a>    <span class="kd">private</span> <span class="n">ConstraintSet</span> <span class="n">navigationMapExpandedConstraint</span><span class="p">;</span>
<a id="__codelineno-11-17" name="__codelineno-11-17" href="#__codelineno-11-17"></a>    <span class="kd">private</span> <span class="n">boolean</span><span class="p">[]</span> <span class="n">constraintChanged</span><span class="p">;</span>
<a id="__codelineno-11-18" name="__codelineno-11-18" href="#__codelineno-11-18"></a>    <span class="kd">private</span> <span class="n">LocationComponent</span> <span class="n">locationComponent</span><span class="p">;</span>
<a id="__codelineno-11-19" name="__codelineno-11-19" href="#__codelineno-11-19"></a>    <span class="kd">private</span> <span class="n">ReplayRouteLocationEngine</span> <span class="n">mockLocationEngine</span><span class="p">;</span>
<a id="__codelineno-11-20" name="__codelineno-11-20" href="#__codelineno-11-20"></a>    <span class="kd">private</span> <span class="n">FusedLocationProviderClient</span> <span class="n">fusedLocationClient</span><span class="p">;</span>
<a id="__codelineno-11-21" name="__codelineno-11-21" href="#__codelineno-11-21"></a>    <span class="kd">private</span> <span class="n">int</span> <span class="n">BEGIN_ROUTE_MILESTONE</span> <span class="p">=</span> <span class="mi">1001</span><span class="p">;</span>
<a id="__codelineno-11-22" name="__codelineno-11-22" href="#__codelineno-11-22"></a>    <span class="kd">private</span> <span class="n">boolean</span> <span class="n">reRoute</span> <span class="p">=</span> <span class="kc">false</span><span class="p">;</span>
<a id="__codelineno-11-23" name="__codelineno-11-23" href="#__codelineno-11-23"></a>    <span class="kd">private</span> <span class="n">boolean</span> <span class="n">isArrived</span> <span class="p">=</span> <span class="kc">false</span><span class="p">;</span>
<a id="__codelineno-11-24" name="__codelineno-11-24" href="#__codelineno-11-24"></a>    <span class="kd">private</span> <span class="n">NavigationViewOptions</span><span class="p">.</span><span class="n">Builder</span> <span class="n">mapviewNavigationOptions</span><span class="p">;</span>
</code></pre></div>
<code>onCreate</code>, initializing the navigation screen
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>    <span class="p">@</span><span class="n">Override</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>    <span class="n">protected</span> <span class="n">void</span> <span class="n">onCreate</span><span class="p">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>        <span class="c1">// Thêm đoạn code sau vào hàm onCreate</span>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>        <span class="n">CustomNavigationNotification</span> <span class="n">customNotification</span> <span class="p">=</span> <span class="n">new</span> <span class="n">CustomNavigationNotification</span><span class="p">(</span><span class="n">this</span><span class="p">);</span>
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>        <span class="k">if</span> <span class="p">(</span><span class="n">Build</span><span class="p">.</span><span class="n">VERSION</span><span class="p">.</span><span class="n">SDK_INT</span> <span class="o">&gt;=</span> <span class="n">Build</span><span class="p">.</span><span class="n">VERSION_CODES</span><span class="p">.</span><span class="n">O</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>            <span class="n">customNotification</span><span class="p">.</span><span class="n">createNotificationChannel</span><span class="p">(</span><span class="n">this</span><span class="p">);</span>
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>        <span class="p">}</span>
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>        <span class="n">MapboxNavigationOptions</span> <span class="n">options</span> <span class="p">=</span> <span class="n">MapboxNavigationOptions</span><span class="p">.</span><span class="n">builder</span><span class="p">()</span>
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>                <span class="p">.</span><span class="n">navigationNotification</span><span class="p">(</span><span class="n">customNotification</span><span class="p">)</span>
<a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a>                <span class="p">.</span><span class="n">build</span><span class="p">();</span>
<a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a>        <span class="n">mapboxNavigation</span> <span class="p">=</span> <span class="n">new</span> <span class="n">MapboxNavigation</span><span class="p">(</span><span class="n">this</span><span class="p">,</span> <span class="n">options</span><span class="p">);</span>
<a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a>        <span class="n">fusedLocationClient</span> <span class="p">=</span> <span class="n">LocationServices</span><span class="p">.</span><span class="n">getFusedLocationProviderClient</span><span class="p">(</span><span class="n">this</span><span class="p">);</span>
<a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a>        <span class="n">initializeViews</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">);</span>
<a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a>        <span class="n">navigationView</span><span class="p">.</span><span class="n">initialize</span><span class="p">(</span><span class="n">this</span><span class="p">);</span>
<a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a>        <span class="n">navigationMapConstraint</span> <span class="p">=</span> <span class="n">new</span> <span class="n">ConstraintSet</span><span class="p">();</span>
<a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a>        <span class="n">navigationMapConstraint</span><span class="p">.</span><span class="n">clone</span><span class="p">(</span><span class="n">customUINavigation</span><span class="p">);</span>
<a id="__codelineno-12-18" name="__codelineno-12-18" href="#__codelineno-12-18"></a>        <span class="n">navigationMapExpandedConstraint</span> <span class="p">=</span> <span class="n">new</span> <span class="n">ConstraintSet</span><span class="p">();</span>
<a id="__codelineno-12-19" name="__codelineno-12-19" href="#__codelineno-12-19"></a>        <span class="n">navigationMapExpandedConstraint</span><span class="p">.</span><span class="n">clone</span><span class="p">(</span><span class="n">this</span><span class="p">,</span> <span class="n">R</span><span class="p">.</span><span class="n">layout</span><span class="p">.</span><span class="n">vietmap_navigation_expand</span><span class="p">);</span>
<a id="__codelineno-12-20" name="__codelineno-12-20" href="#__codelineno-12-20"></a>        <span class="n">constraintChanged</span> <span class="p">=</span> <span class="n">new</span> <span class="n">boolean</span><span class="p">[]{</span><span class="kc">false</span><span class="p">};</span>
<a id="__codelineno-12-21" name="__codelineno-12-21" href="#__codelineno-12-21"></a>    <span class="p">}</span>
</code></pre></div>
<code>initializeViews</code>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>    <span class="kd">private</span> <span class="n">void</span> <span class="n">initializeViews</span><span class="p">(@</span><span class="n">Nullable</span> <span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>        <span class="n">setContentView</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="n">layout</span><span class="p">.</span><span class="n">activity_viet_map_navigation</span><span class="p">);</span>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>        <span class="n">customUINavigation</span> <span class="p">=</span> <span class="n">findViewById</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="n">id</span><span class="p">.</span><span class="n">vietmapNavigation</span><span class="p">);</span>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>        <span class="n">mapView</span> <span class="p">=</span> <span class="n">findViewById</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="n">id</span><span class="p">.</span><span class="n">mapView</span><span class="p">);</span>
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>        <span class="n">navigationView</span> <span class="p">=</span> <span class="n">findViewById</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="n">id</span><span class="p">.</span><span class="n">navigationView</span><span class="p">);</span>
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>        <span class="n">loading</span> <span class="p">=</span> <span class="n">findViewById</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="n">id</span><span class="p">.</span><span class="n">loading</span><span class="p">);</span>
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>        <span class="n">launchNavigationFab</span> <span class="p">=</span> <span class="n">findViewById</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="n">id</span><span class="p">.</span><span class="n">launchNavigation</span><span class="p">);</span>
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a>        <span class="n">navigationView</span><span class="p">.</span><span class="n">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">);</span>
<a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a>        <span class="n">mapView</span><span class="p">.</span><span class="n">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">);</span>
<a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a>        <span class="n">launchNavigationFab</span><span class="p">.</span><span class="n">setOnClickListener</span><span class="p">(</span><span class="n">v</span> <span class="p">-&gt;</span> <span class="p">{</span>
<a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a>            <span class="n">expandCollapse</span><span class="p">();</span>
<a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a>            <span class="n">launchNavigation</span><span class="p">();</span>
<a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a>        <span class="p">});</span>
<a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a>        <span class="n">mapView</span><span class="p">.</span><span class="n">getMapAsync</span><span class="p">(</span><span class="n">this</span><span class="p">);</span>
<a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a>    <span class="p">}</span>
</code></pre></div>
<code>onMapReady</code>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>    <span class="p">@</span><span class="n">Override</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>    <span class="kd">public</span> <span class="n">void</span> <span class="n">onMapReady</span><span class="p">(@</span><span class="n">NonNull</span> <span class="n">MapboxMap</span> <span class="n">mapboxMap</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>        <span class="n">this</span><span class="p">.</span><span class="n">mapboxMap</span> <span class="p">=</span> <span class="n">mapboxMap</span><span class="p">;</span>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>        <span class="n">mapboxMap</span><span class="p">.</span><span class="n">setStyle</span><span class="p">(</span><span class="n">new</span> <span class="n">Style</span><span class="p">.</span><span class="n">Builder</span><span class="p">().</span><span class="n">fromUri</span><span class="p">(</span><span class="n">YOUR_STYLE_URL_HERE</span><span class="p">),</span> <span class="n">style</span> <span class="p">-&gt;</span> <span class="p">{</span>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>            <span class="n">initLocationEngine</span><span class="p">();</span>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>            <span class="n">getCurrentLocation</span><span class="p">();</span>
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a>            <span class="n">enableLocationComponent</span><span class="p">(</span><span class="n">style</span><span class="p">);</span>
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a>            <span class="n">initMapRoute</span><span class="p">();</span>
<a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a>        <span class="p">});</span>
<a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a>        <span class="n">this</span><span class="p">.</span><span class="n">mapboxMap</span><span class="p">.</span><span class="n">addOnMapClickListener</span><span class="p">(</span><span class="n">this</span><span class="p">);</span>
<a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a>    <span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>    <span class="kd">private</span> <span class="n">void</span> <span class="n">initLocationEngine</span><span class="p">()</span> <span class="p">{</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>        <span class="n">mockLocationEngine</span> <span class="p">=</span> <span class="n">new</span> <span class="n">ReplayRouteLocationEngine</span><span class="p">();</span>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>        <span class="n">locationEngine</span> <span class="p">=</span> <span class="n">LocationEngineProvider</span><span class="p">.</span><span class="n">getBestLocationEngine</span><span class="p">(</span><span class="n">this</span><span class="p">);</span>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>        <span class="n">long</span> <span class="n">DEFAULT_INTERVAL_IN_MILLISECONDS</span> <span class="p">=</span> <span class="mi">5000</span><span class="p">;</span>
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>        <span class="n">long</span> <span class="n">DEFAULT_MAX_WAIT_TIME</span> <span class="p">=</span> <span class="mi">30000</span><span class="p">;</span>
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>        <span class="n">LocationEngineRequest</span> <span class="n">request</span> <span class="p">=</span> <span class="n">new</span> <span class="n">LocationEngineRequest</span><span class="p">.</span><span class="n">Builder</span><span class="p">(</span><span class="n">DEFAULT_INTERVAL_IN_MILLISECONDS</span><span class="p">)</span>
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>                <span class="p">.</span><span class="n">setPriority</span><span class="p">(</span><span class="n">LocationEngineRequest</span><span class="p">.</span><span class="n">PRIORITY_HIGH_ACCURACY</span><span class="p">)</span>
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>                <span class="p">.</span><span class="n">setMaxWaitTime</span><span class="p">(</span><span class="n">DEFAULT_MAX_WAIT_TIME</span><span class="p">)</span>
<a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a>                <span class="p">.</span><span class="n">build</span><span class="p">();</span>
<a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a>
<a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a>        <span class="k">if</span> <span class="p">(</span><span class="n">ActivityCompat</span><span class="p">.</span><span class="n">checkSelfPermission</span><span class="p">(</span><span class="n">this</span><span class="p">,</span> <span class="n">android</span><span class="p">.</span><span class="n">Manifest</span><span class="p">.</span><span class="n">permission</span><span class="p">.</span><span class="n">ACCESS_FINE_LOCATION</span><span class="p">)</span> <span class="p">==</span> <span class="n">PackageManager</span><span class="p">.</span><span class="n">PERMISSION_GRANTED</span> <span class="o">&amp;&amp;</span> <span class="n">ActivityCompat</span><span class="p">.</span><span class="n">checkSelfPermission</span><span class="p">(</span><span class="n">this</span><span class="p">,</span> <span class="n">android</span><span class="p">.</span><span class="n">Manifest</span><span class="p">.</span><span class="n">permission</span><span class="p">.</span><span class="n">ACCESS_COARSE_LOCATION</span><span class="p">)</span> <span class="p">==</span> <span class="n">PackageManager</span><span class="p">.</span><span class="n">PERMISSION_GRANTED</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a>            <span class="n">mockLocationEngine</span><span class="p">.</span><span class="n">assignLastLocation</span><span class="p">(</span><span class="n">origin</span><span class="p">);</span>
<a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a>            <span class="k">return</span><span class="p">;</span>
<a id="__codelineno-15-14" name="__codelineno-15-14" href="#__codelineno-15-14"></a>        <span class="p">}</span>
<a id="__codelineno-15-15" name="__codelineno-15-15" href="#__codelineno-15-15"></a>    <span class="p">}</span>
<a id="__codelineno-15-16" name="__codelineno-15-16" href="#__codelineno-15-16"></a>
<a id="__codelineno-15-17" name="__codelineno-15-17" href="#__codelineno-15-17"></a>    <span class="kd">private</span> <span class="n">void</span> <span class="n">initMapRoute</span><span class="p">()</span> <span class="p">{</span>
<a id="__codelineno-15-18" name="__codelineno-15-18" href="#__codelineno-15-18"></a>
<a id="__codelineno-15-19" name="__codelineno-15-19" href="#__codelineno-15-19"></a>        <span class="n">mapRoute</span> <span class="p">=</span> <span class="n">new</span> <span class="n">NavigationMapRoute</span><span class="p">(</span><span class="n">mapView</span><span class="p">,</span> <span class="n">mapboxMap</span><span class="p">);</span>
<a id="__codelineno-15-20" name="__codelineno-15-20" href="#__codelineno-15-20"></a>        <span class="n">mapRoute</span><span class="p">.</span><span class="n">setOnRouteSelectionChangeListener</span><span class="p">(</span><span class="n">this</span><span class="p">);</span>
<a id="__codelineno-15-21" name="__codelineno-15-21" href="#__codelineno-15-21"></a>        <span class="n">mapRoute</span><span class="p">.</span><span class="n">addProgressChangeListener</span><span class="p">(</span><span class="n">new</span> <span class="n">MapboxNavigation</span><span class="p">(</span><span class="n">this</span><span class="p">));</span>
<a id="__codelineno-15-22" name="__codelineno-15-22" href="#__codelineno-15-22"></a>    <span class="p">}</span>
<a id="__codelineno-15-23" name="__codelineno-15-23" href="#__codelineno-15-23"></a>
<a id="__codelineno-15-24" name="__codelineno-15-24" href="#__codelineno-15-24"></a>
<a id="__codelineno-15-25" name="__codelineno-15-25" href="#__codelineno-15-25"></a>    <span class="kd">private</span> <span class="n">void</span> <span class="n">getCurrentLocation</span><span class="p">()</span> <span class="p">{</span>
<a id="__codelineno-15-26" name="__codelineno-15-26" href="#__codelineno-15-26"></a>        <span class="k">if</span> <span class="p">(</span><span class="n">ActivityCompat</span><span class="p">.</span><span class="n">checkSelfPermission</span><span class="p">(</span><span class="n">this</span><span class="p">,</span> <span class="n">android</span><span class="p">.</span><span class="n">Manifest</span><span class="p">.</span><span class="n">permission</span><span class="p">.</span><span class="n">ACCESS_FINE_LOCATION</span><span class="p">)</span> <span class="p">==</span> <span class="n">PackageManager</span><span class="p">.</span><span class="n">PERMISSION_GRANTED</span> <span class="o">&amp;&amp;</span> <span class="n">ActivityCompat</span><span class="p">.</span><span class="n">checkSelfPermission</span><span class="p">(</span><span class="n">this</span><span class="p">,</span> <span class="n">android</span><span class="p">.</span><span class="n">Manifest</span><span class="p">.</span><span class="n">permission</span><span class="p">.</span><span class="n">ACCESS_COARSE_LOCATION</span><span class="p">)</span> <span class="p">==</span> <span class="n">PackageManager</span><span class="p">.</span><span class="n">PERMISSION_GRANTED</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-15-27" name="__codelineno-15-27" href="#__codelineno-15-27"></a>            <span class="n">fusedLocationClient</span><span class="p">.</span><span class="n">getLastLocation</span><span class="p">()</span>
<a id="__codelineno-15-28" name="__codelineno-15-28" href="#__codelineno-15-28"></a>                    <span class="p">.</span><span class="n">addOnSuccessListener</span><span class="p">(</span><span class="n">this</span><span class="p">,</span> <span class="n">location</span> <span class="p">-&gt;</span> <span class="p">{</span>
<a id="__codelineno-15-29" name="__codelineno-15-29" href="#__codelineno-15-29"></a>                        <span class="k">if</span> <span class="p">(</span><span class="n">location</span> <span class="o">!=</span> <span class="n">null</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-15-30" name="__codelineno-15-30" href="#__codelineno-15-30"></a>                            <span class="n">origin</span> <span class="p">=</span> <span class="n">Point</span><span class="p">.</span><span class="n">fromLngLat</span><span class="p">(</span><span class="n">location</span><span class="p">.</span><span class="n">getLongitude</span><span class="p">(),</span> <span class="n">location</span><span class="p">.</span><span class="n">getLatitude</span><span class="p">());</span>
<a id="__codelineno-15-31" name="__codelineno-15-31" href="#__codelineno-15-31"></a>                        <span class="p">}</span>
<a id="__codelineno-15-32" name="__codelineno-15-32" href="#__codelineno-15-32"></a>                    <span class="p">});</span>
<a id="__codelineno-15-33" name="__codelineno-15-33" href="#__codelineno-15-33"></a>            <span class="k">return</span><span class="p">;</span>
<a id="__codelineno-15-34" name="__codelineno-15-34" href="#__codelineno-15-34"></a>        <span class="p">}</span>
<a id="__codelineno-15-35" name="__codelineno-15-35" href="#__codelineno-15-35"></a>    <span class="p">}</span>
<a id="__codelineno-15-36" name="__codelineno-15-36" href="#__codelineno-15-36"></a>    <span class="kd">private</span> <span class="n">void</span> <span class="n">enableLocationComponent</span><span class="p">(</span><span class="n">Style</span> <span class="n">style</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-15-37" name="__codelineno-15-37" href="#__codelineno-15-37"></a>        <span class="n">locationComponent</span> <span class="p">=</span> <span class="n">mapboxMap</span><span class="p">.</span><span class="n">getLocationComponent</span><span class="p">();</span>
<a id="__codelineno-15-38" name="__codelineno-15-38" href="#__codelineno-15-38"></a>
<a id="__codelineno-15-39" name="__codelineno-15-39" href="#__codelineno-15-39"></a>        <span class="k">if</span> <span class="p">(</span><span class="n">locationComponent</span> <span class="o">!=</span> <span class="n">null</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-15-40" name="__codelineno-15-40" href="#__codelineno-15-40"></a>            <span class="n">locationComponent</span><span class="p">.</span><span class="n">activateLocationComponent</span><span class="p">(</span>
<a id="__codelineno-15-41" name="__codelineno-15-41" href="#__codelineno-15-41"></a>                    <span class="n">LocationComponentActivationOptions</span><span class="p">.</span><span class="n">builder</span><span class="p">(</span><span class="n">this</span><span class="p">,</span> <span class="n">style</span><span class="p">).</span><span class="n">build</span><span class="p">()</span>
<a id="__codelineno-15-42" name="__codelineno-15-42" href="#__codelineno-15-42"></a>            <span class="p">);</span>
<a id="__codelineno-15-43" name="__codelineno-15-43" href="#__codelineno-15-43"></a>            <span class="k">if</span> <span class="p">(</span><span class="n">ActivityCompat</span><span class="p">.</span><span class="n">checkSelfPermission</span><span class="p">(</span><span class="n">this</span><span class="p">,</span> <span class="n">android</span><span class="p">.</span><span class="n">Manifest</span><span class="p">.</span><span class="n">permission</span><span class="p">.</span><span class="n">ACCESS_FINE_LOCATION</span><span class="p">)</span> <span class="o">!=</span> <span class="n">PackageManager</span><span class="p">.</span><span class="n">PERMISSION_GRANTED</span> <span class="o">&amp;&amp;</span> <span class="n">ActivityCompat</span><span class="p">.</span><span class="n">checkSelfPermission</span><span class="p">(</span><span class="n">this</span><span class="p">,</span> <span class="n">android</span><span class="p">.</span><span class="n">Manifest</span><span class="p">.</span><span class="n">permission</span><span class="p">.</span><span class="n">ACCESS_COARSE_LOCATION</span><span class="p">)</span> <span class="o">!=</span> <span class="n">PackageManager</span><span class="p">.</span><span class="n">PERMISSION_GRANTED</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-15-44" name="__codelineno-15-44" href="#__codelineno-15-44"></a>                <span class="k">return</span><span class="p">;</span>
<a id="__codelineno-15-45" name="__codelineno-15-45" href="#__codelineno-15-45"></a>            <span class="p">}</span>
<a id="__codelineno-15-46" name="__codelineno-15-46" href="#__codelineno-15-46"></a>            <span class="n">locationComponent</span><span class="p">.</span><span class="n">setLocationComponentEnabled</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<a id="__codelineno-15-47" name="__codelineno-15-47" href="#__codelineno-15-47"></a>            <span class="n">locationComponent</span><span class="p">.</span><span class="n">setCameraMode</span><span class="p">(</span><span class="n">CameraMode</span><span class="p">.</span><span class="n">TRACKING_GPS_NORTH</span><span class="p">);</span>
<a id="__codelineno-15-48" name="__codelineno-15-48" href="#__codelineno-15-48"></a>            <span class="n">locationComponent</span><span class="p">.</span><span class="n">zoomWhileTracking</span><span class="p">(</span><span class="n">DEFAULT_CAMERA_ZOOM</span><span class="p">);</span>
<a id="__codelineno-15-49" name="__codelineno-15-49" href="#__codelineno-15-49"></a>            <span class="n">locationComponent</span><span class="p">.</span><span class="n">setRenderMode</span><span class="p">(</span><span class="n">RenderMode</span><span class="p">.</span><span class="n">GPS</span><span class="p">);</span>
<a id="__codelineno-15-50" name="__codelineno-15-50" href="#__codelineno-15-50"></a>            <span class="n">locationComponent</span><span class="p">.</span><span class="n">setLocationEngine</span><span class="p">(</span><span class="n">locationEngine</span><span class="p">);</span>
<a id="__codelineno-15-51" name="__codelineno-15-51" href="#__codelineno-15-51"></a>        <span class="p">}</span>
<a id="__codelineno-15-52" name="__codelineno-15-52" href="#__codelineno-15-52"></a>    <span class="p">}</span>
</code></pre></div>
Create <code>layout xml vietmap_navigation_expand</code>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="o">&lt;?</span><span class="n">xml</span> <span class="n">version</span><span class="p">=</span><span class="s">&quot;1.0&quot;</span> <span class="n">encoding</span><span class="p">=</span><span class="s">&quot;utf-8&quot;</span><span class="p">?</span><span class="o">&gt;</span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="p">&lt;</span><span class="n">androidx</span><span class="p">.</span><span class="n">constraintlayout</span><span class="p">.</span><span class="n">widget</span><span class="p">.</span><span class="n">ConstraintLayout</span>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>    <span class="n">xmlns</span><span class="p">:</span><span class="n">android</span><span class="p">=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>    <span class="n">xmlns</span><span class="p">:</span><span class="n">app</span><span class="p">=</span><span class="s">&quot;http://schemas.android.com/apk/res-auto&quot;</span>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>    <span class="n">android</span><span class="p">:</span><span class="n">id</span><span class="p">=</span><span class="s">&quot;@+id/vietmapNavigationExpand&quot;</span>
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a>    <span class="n">android</span><span class="p">:</span><span class="n">layout_width</span><span class="p">=</span><span class="s">&quot;match_parent&quot;</span>
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a>    <span class="n">android</span><span class="p">:</span><span class="n">layout_height</span><span class="p">=</span><span class="s">&quot;match_parent&quot;</span><span class="o">&gt;</span>
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a>
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a>    <span class="p">&lt;</span><span class="n">com</span><span class="p">.</span><span class="n">mapbox</span><span class="p">.</span><span class="n">services</span><span class="p">.</span><span class="n">android</span><span class="p">.</span><span class="n">navigation</span><span class="p">.</span><span class="n">ui</span><span class="p">.</span><span class="n">v5</span><span class="p">.</span><span class="n">NavigationView</span>
<a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a>        <span class="n">android</span><span class="p">:</span><span class="n">id</span><span class="p">=</span><span class="s">&quot;@+id/navigationView&quot;</span>
<a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a>        <span class="n">android</span><span class="p">:</span><span class="n">layout_width</span><span class="p">=</span><span class="s">&quot;match_parent&quot;</span>
<a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a>        <span class="n">android</span><span class="p">:</span><span class="n">layout_height</span><span class="p">=</span><span class="s">&quot;0dp&quot;</span>
<a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a>        <span class="n">android</span><span class="p">:</span><span class="n">visibility</span><span class="p">=</span><span class="s">&quot;visible&quot;</span>
<a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a>        <span class="n">app</span><span class="p">:</span><span class="n">maplibre_cameraZoom</span><span class="p">=</span><span class="s">&quot;15&quot;</span>
<a id="__codelineno-16-15" name="__codelineno-16-15" href="#__codelineno-16-15"></a>        <span class="n">app</span><span class="p">:</span><span class="n">layout_constraintHeight_percent</span><span class="p">=</span><span class="s">&quot;1&quot;</span>
<a id="__codelineno-16-16" name="__codelineno-16-16" href="#__codelineno-16-16"></a>        <span class="n">app</span><span class="p">:</span><span class="n">layout_constraintTop_toTopOf</span><span class="p">=</span><span class="s">&quot;@+id/vietmapNavigationExpand&quot;</span>
<a id="__codelineno-16-17" name="__codelineno-16-17" href="#__codelineno-16-17"></a>        <span class="n">app</span><span class="p">:</span><span class="n">layout_constraintBottom_toBottomOf</span><span class="p">=</span><span class="s">&quot;@+id/vietmapNavigationExpand&quot;</span>
<a id="__codelineno-16-18" name="__codelineno-16-18" href="#__codelineno-16-18"></a>        <span class="n">app</span><span class="p">:</span><span class="n">navigationDarkTheme</span><span class="p">=</span><span class="s">&quot;@style/NavigationViewDark&quot;</span>
<a id="__codelineno-16-19" name="__codelineno-16-19" href="#__codelineno-16-19"></a>        <span class="n">app</span><span class="p">:</span><span class="n">navigationLightTheme</span><span class="p">=</span><span class="s">&quot;@style/NavigationViewLight&quot;</span><span class="o">/&gt;</span>
<a id="__codelineno-16-20" name="__codelineno-16-20" href="#__codelineno-16-20"></a>
<a id="__codelineno-16-21" name="__codelineno-16-21" href="#__codelineno-16-21"></a>    <span class="p">&lt;</span><span class="n">com</span><span class="p">.</span><span class="n">mapbox</span><span class="p">.</span><span class="n">mapboxsdk</span><span class="p">.</span><span class="n">maps</span><span class="p">.</span><span class="n">MapView</span>
<a id="__codelineno-16-22" name="__codelineno-16-22" href="#__codelineno-16-22"></a>        <span class="n">android</span><span class="p">:</span><span class="n">id</span><span class="p">=</span><span class="s">&quot;@+id/mapView&quot;</span>
<a id="__codelineno-16-23" name="__codelineno-16-23" href="#__codelineno-16-23"></a>        <span class="n">android</span><span class="p">:</span><span class="n">layout_width</span><span class="p">=</span><span class="s">&quot;match_parent&quot;</span>
<a id="__codelineno-16-24" name="__codelineno-16-24" href="#__codelineno-16-24"></a>        <span class="n">android</span><span class="p">:</span><span class="n">layout_height</span><span class="p">=</span><span class="s">&quot;0dp&quot;</span>
<a id="__codelineno-16-25" name="__codelineno-16-25" href="#__codelineno-16-25"></a>        <span class="n">app</span><span class="p">:</span><span class="n">maplibre_cameraZoom</span><span class="p">=</span><span class="s">&quot;15&quot;</span>
<a id="__codelineno-16-26" name="__codelineno-16-26" href="#__codelineno-16-26"></a>        <span class="n">android</span><span class="p">:</span><span class="n">visibility</span><span class="p">=</span><span class="s">&quot;gone&quot;</span>
<a id="__codelineno-16-27" name="__codelineno-16-27" href="#__codelineno-16-27"></a>        <span class="n">app</span><span class="p">:</span><span class="n">layout_constraintBottom_toBottomOf</span><span class="p">=</span><span class="s">&quot;@+id/vietmapNavigationExpand&quot;</span>
<a id="__codelineno-16-28" name="__codelineno-16-28" href="#__codelineno-16-28"></a>        <span class="n">app</span><span class="p">:</span><span class="n">layout_constraintHeight_percent</span><span class="p">=</span><span class="s">&quot;0&quot;</span><span class="o">/&gt;</span>
<a id="__codelineno-16-29" name="__codelineno-16-29" href="#__codelineno-16-29"></a>
<a id="__codelineno-16-30" name="__codelineno-16-30" href="#__codelineno-16-30"></a>    <span class="p">&lt;</span><span class="n">ProgressBar</span>
<a id="__codelineno-16-31" name="__codelineno-16-31" href="#__codelineno-16-31"></a>        <span class="n">android</span><span class="p">:</span><span class="n">id</span><span class="p">=</span><span class="s">&quot;@+id/loading&quot;</span>
<a id="__codelineno-16-32" name="__codelineno-16-32" href="#__codelineno-16-32"></a>        <span class="n">style</span><span class="p">=</span><span class="s">&quot;?android:attr/progressBarStyle&quot;</span>
<a id="__codelineno-16-33" name="__codelineno-16-33" href="#__codelineno-16-33"></a>        <span class="n">android</span><span class="p">:</span><span class="n">layout_width</span><span class="p">=</span><span class="s">&quot;wrap_content&quot;</span>
<a id="__codelineno-16-34" name="__codelineno-16-34" href="#__codelineno-16-34"></a>        <span class="n">android</span><span class="p">:</span><span class="n">layout_height</span><span class="p">=</span><span class="s">&quot;wrap_content&quot;</span>
<a id="__codelineno-16-35" name="__codelineno-16-35" href="#__codelineno-16-35"></a>        <span class="n">android</span><span class="p">:</span><span class="n">indeterminate</span><span class="p">=</span><span class="s">&quot;true&quot;</span>
<a id="__codelineno-16-36" name="__codelineno-16-36" href="#__codelineno-16-36"></a>        <span class="n">android</span><span class="p">:</span><span class="n">visibility</span><span class="p">=</span><span class="s">&quot;gone&quot;</span>
<a id="__codelineno-16-37" name="__codelineno-16-37" href="#__codelineno-16-37"></a>        <span class="n">app</span><span class="p">:</span><span class="n">layout_constraintBottom_toBottomOf</span><span class="p">=</span><span class="s">&quot;parent&quot;</span>
<a id="__codelineno-16-38" name="__codelineno-16-38" href="#__codelineno-16-38"></a>        <span class="n">app</span><span class="p">:</span><span class="n">layout_constraintEnd_toEndOf</span><span class="p">=</span><span class="s">&quot;parent&quot;</span>
<a id="__codelineno-16-39" name="__codelineno-16-39" href="#__codelineno-16-39"></a>        <span class="n">app</span><span class="p">:</span><span class="n">layout_constraintStart_toStartOf</span><span class="p">=</span><span class="s">&quot;parent&quot;</span>
<a id="__codelineno-16-40" name="__codelineno-16-40" href="#__codelineno-16-40"></a>        <span class="n">app</span><span class="p">:</span><span class="n">layout_constraintTop_toTopOf</span><span class="p">=</span><span class="s">&quot;parent&quot;</span><span class="o">/&gt;</span>
<a id="__codelineno-16-41" name="__codelineno-16-41" href="#__codelineno-16-41"></a>
<a id="__codelineno-16-42" name="__codelineno-16-42" href="#__codelineno-16-42"></a>    <span class="p">&lt;</span><span class="n">com</span><span class="p">.</span><span class="n">google</span><span class="p">.</span><span class="n">android</span><span class="p">.</span><span class="n">material</span><span class="p">.</span><span class="n">floatingactionbutton</span><span class="p">.</span><span class="n">FloatingActionButton</span>
<a id="__codelineno-16-43" name="__codelineno-16-43" href="#__codelineno-16-43"></a>        <span class="n">android</span><span class="p">:</span><span class="n">id</span><span class="p">=</span><span class="s">&quot;@+id/launchNavigation&quot;</span>
<a id="__codelineno-16-44" name="__codelineno-16-44" href="#__codelineno-16-44"></a>        <span class="n">android</span><span class="p">:</span><span class="n">layout_width</span><span class="p">=</span><span class="s">&quot;wrap_content&quot;</span>
<a id="__codelineno-16-45" name="__codelineno-16-45" href="#__codelineno-16-45"></a>        <span class="n">android</span><span class="p">:</span><span class="n">layout_height</span><span class="p">=</span><span class="s">&quot;wrap_content&quot;</span>
<a id="__codelineno-16-46" name="__codelineno-16-46" href="#__codelineno-16-46"></a>        <span class="n">android</span><span class="p">:</span><span class="n">layout_marginBottom</span><span class="p">=</span><span class="s">&quot;16dp&quot;</span>
<a id="__codelineno-16-47" name="__codelineno-16-47" href="#__codelineno-16-47"></a>        <span class="n">android</span><span class="p">:</span><span class="n">layout_marginEnd</span><span class="p">=</span><span class="s">&quot;16dp&quot;</span>
<a id="__codelineno-16-48" name="__codelineno-16-48" href="#__codelineno-16-48"></a>        <span class="n">android</span><span class="p">:</span><span class="n">layout_marginRight</span><span class="p">=</span><span class="s">&quot;16dp&quot;</span>
<a id="__codelineno-16-49" name="__codelineno-16-49" href="#__codelineno-16-49"></a>        <span class="n">android</span><span class="p">:</span><span class="n">src</span><span class="p">=</span><span class="s">&quot;@drawable/ic_navigation&quot;</span>
<a id="__codelineno-16-50" name="__codelineno-16-50" href="#__codelineno-16-50"></a>        <span class="n">android</span><span class="p">:</span><span class="n">tint</span><span class="p">=</span><span class="s">&quot;@android:color/white&quot;</span>
<a id="__codelineno-16-51" name="__codelineno-16-51" href="#__codelineno-16-51"></a>        <span class="n">android</span><span class="p">:</span><span class="n">visibility</span><span class="p">=</span><span class="s">&quot;gone&quot;</span>
<a id="__codelineno-16-52" name="__codelineno-16-52" href="#__codelineno-16-52"></a>        <span class="n">app</span><span class="p">:</span><span class="n">backgroundTint</span><span class="p">=</span><span class="s">&quot;@color/colorPrimary&quot;</span>
<a id="__codelineno-16-53" name="__codelineno-16-53" href="#__codelineno-16-53"></a>        <span class="n">app</span><span class="p">:</span><span class="n">layout_constraintBottom_toBottomOf</span><span class="p">=</span><span class="s">&quot;parent&quot;</span>
<a id="__codelineno-16-54" name="__codelineno-16-54" href="#__codelineno-16-54"></a>        <span class="n">app</span><span class="p">:</span><span class="n">layout_constraintEnd_toEndOf</span><span class="p">=</span><span class="s">&quot;parent&quot;</span><span class="o">/&gt;</span>
<a id="__codelineno-16-55" name="__codelineno-16-55" href="#__codelineno-16-55"></a>
<a id="__codelineno-16-56" name="__codelineno-16-56" href="#__codelineno-16-56"></a><span class="o">&lt;/</span><span class="n">androidx</span><span class="p">.</span><span class="n">constraintlayout</span><span class="p">.</span><span class="n">widget</span><span class="p">.</span><span class="n">ConstraintLayout</span><span class="p">&gt;</span>
</code></pre></div>
expandCollapse
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>    <span class="kd">private</span> <span class="n">void</span> <span class="n">expandCollapse</span><span class="p">()</span> <span class="p">{</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>        <span class="n">TransitionManager</span><span class="p">.</span><span class="n">beginDelayedTransition</span><span class="p">(</span><span class="n">customUINavigation</span><span class="p">);</span>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>        <span class="n">ConstraintSet</span> <span class="n">constraint</span><span class="p">;</span>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>        <span class="k">if</span> <span class="p">(</span><span class="n">constraintChanged</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="p">{</span>
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>            <span class="n">constraint</span> <span class="p">=</span> <span class="n">navigationMapConstraint</span><span class="p">;</span>
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a>        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a>            <span class="n">constraint</span> <span class="p">=</span> <span class="n">navigationMapExpandedConstraint</span><span class="p">;</span>
<a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a>        <span class="p">}</span>
<a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a>        <span class="n">constraint</span><span class="p">.</span><span class="n">applyTo</span><span class="p">(</span><span class="n">customUINavigation</span><span class="p">);</span>
<a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a>        <span class="n">constraintChanged</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">=</span> <span class="o">!</span><span class="n">constraintChanged</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a>    <span class="p">}</span>
</code></pre></div>
stopNavigationFunction
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>    <span class="n">void</span> <span class="n">stopNavigationFunction</span><span class="p">(){</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>        <span class="n">navigationView</span><span class="p">.</span><span class="n">stopNavigation</span><span class="p">();</span>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>        <span class="n">mapboxNavigation</span><span class="p">.</span><span class="n">stopNavigation</span><span class="p">();</span>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>        <span class="n">launchNavigationFab</span><span class="p">.</span><span class="n">show</span><span class="p">();</span>
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>    <span class="p">}</span>
</code></pre></div>
onCancelNavigation(): Listening function when the user stops navigation
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>    <span class="p">@</span><span class="n">Override</span>
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>    <span class="kd">public</span> <span class="n">void</span> <span class="n">onCancelNavigation</span><span class="p">()</span> <span class="p">{</span>
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>        <span class="n">isNavigationRunning</span><span class="p">=</span><span class="kc">false</span><span class="p">;</span>
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>        <span class="n">expandCollapse</span><span class="p">();</span>
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>        <span class="n">stopNavigationFunction</span><span class="p">();</span>
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>    <span class="p">}</span>
</code></pre></div>
onRunning and onNavigationReady(): Listening for changes in the navigation state
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>    <span class="p">@</span><span class="n">Override</span>
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>    <span class="kd">public</span> <span class="n">void</span> <span class="n">onRunning</span><span class="p">(</span><span class="n">boolean</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>        <span class="n">isNavigationRunning</span> <span class="p">=</span> <span class="n">b</span><span class="p">;</span>
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>    <span class="p">}</span>
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a>
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a>    <span class="p">@</span><span class="n">Override</span>
<a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a>    <span class="kd">public</span> <span class="n">void</span> <span class="n">onNavigationReady</span><span class="p">(</span><span class="n">boolean</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a>
<a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a>        <span class="n">isNavigationRunning</span> <span class="p">=</span> <span class="n">b</span><span class="p">;</span>
<a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a>    <span class="p">}</span>
</code></pre></div>
 onNewPrimaryRouteSelected(): Listening for changes when user chooses alternative route
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>     <span class="p">@</span><span class="n">Override</span>
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>    <span class="kd">public</span> <span class="n">void</span> <span class="n">onNewPrimaryRouteSelected</span><span class="p">(</span><span class="n">DirectionsRoute</span> <span class="n">directionsRoute</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a>        <span class="n">route</span><span class="p">=</span><span class="n">directionsRoute</span><span class="p">;</span>
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>    <span class="p">}</span>
</code></pre></div></p>
<p>Create <code>CustomNavigationNotification</code> - Sending notifications to the user along each route:
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CustomNavigationNotification</span> <span class="n">implements</span> <span class="n">NavigationNotification</span> <span class="p">{</span>
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a>    <span class="kd">private</span> <span class="kd">static</span> <span class="kr">final</span> <span class="n">int</span> <span class="n">CUSTOM_NOTIFICATION_ID</span> <span class="p">=</span> <span class="mi">91234821</span><span class="p">;</span>
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a>    <span class="kd">private</span> <span class="kd">static</span> <span class="kr">final</span> <span class="nb">String</span> <span class="n">STOP_NAVIGATION_ACTION</span> <span class="p">=</span> <span class="s">&quot;stop_navigation_action&quot;</span><span class="p">;</span>
<a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a>    <span class="kd">private</span> <span class="kr">final</span> <span class="n">Notification</span> <span class="n">customNotification</span><span class="p">;</span>
<a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a>    <span class="kd">private</span> <span class="kr">final</span> <span class="n">NotificationCompat</span><span class="p">.</span><span class="n">Builder</span> <span class="n">customNotificationBuilder</span><span class="p">;</span>
<a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a>    <span class="kd">private</span> <span class="kr">final</span> <span class="n">NotificationManager</span> <span class="n">notificationManager</span><span class="p">;</span>
<a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a>    <span class="kd">private</span> <span class="n">BroadcastReceiver</span> <span class="n">stopNavigationReceiver</span><span class="p">;</span>
<a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a>    <span class="kd">private</span> <span class="n">int</span> <span class="n">numberOfUpdates</span><span class="p">;</span>
<a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a>
<a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a>    <span class="kd">public</span> <span class="n">CustomNavigationNotification</span><span class="p">(</span><span class="n">Context</span> <span class="n">applicationContext</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a>        <span class="n">notificationManager</span> <span class="p">=</span> <span class="p">(</span><span class="n">NotificationManager</span><span class="p">)</span> <span class="n">applicationContext</span><span class="p">.</span><span class="n">getSystemService</span><span class="p">(</span><span class="n">Context</span><span class="p">.</span><span class="n">NOTIFICATION_SERVICE</span><span class="p">);</span>
<a id="__codelineno-22-13" name="__codelineno-22-13" href="#__codelineno-22-13"></a>        <span class="n">customNotificationBuilder</span> <span class="p">=</span> <span class="n">new</span> <span class="n">NotificationCompat</span><span class="p">.</span><span class="n">Builder</span><span class="p">(</span><span class="n">applicationContext</span><span class="p">,</span> <span class="n">NAVIGATION_NOTIFICATION_CHANNEL</span><span class="p">)</span>
<a id="__codelineno-22-14" name="__codelineno-22-14" href="#__codelineno-22-14"></a>                <span class="p">.</span><span class="n">setSmallIcon</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="n">drawable</span><span class="p">.</span><span class="n">ic_launcher_foreground</span><span class="p">)</span>
<a id="__codelineno-22-15" name="__codelineno-22-15" href="#__codelineno-22-15"></a>                <span class="p">.</span><span class="n">setContentTitle</span><span class="p">(</span><span class="s">&quot;Custom Navigation Notification&quot;</span><span class="p">)</span>
<a id="__codelineno-22-16" name="__codelineno-22-16" href="#__codelineno-22-16"></a>                <span class="p">.</span><span class="n">setContentText</span><span class="p">(</span><span class="s">&quot;Display your own content here!&quot;</span><span class="p">)</span>
<a id="__codelineno-22-17" name="__codelineno-22-17" href="#__codelineno-22-17"></a>                <span class="p">.</span><span class="n">setContentIntent</span><span class="p">(</span><span class="n">createPendingStopIntent</span><span class="p">(</span><span class="n">applicationContext</span><span class="p">));</span>
<a id="__codelineno-22-18" name="__codelineno-22-18" href="#__codelineno-22-18"></a>        <span class="n">customNotification</span> <span class="p">=</span> <span class="n">customNotificationBuilder</span><span class="p">.</span><span class="n">build</span><span class="p">();</span>
<a id="__codelineno-22-19" name="__codelineno-22-19" href="#__codelineno-22-19"></a>    <span class="p">}</span>
<a id="__codelineno-22-20" name="__codelineno-22-20" href="#__codelineno-22-20"></a>
<a id="__codelineno-22-21" name="__codelineno-22-21" href="#__codelineno-22-21"></a>    <span class="p">@</span><span class="n">Override</span>
<a id="__codelineno-22-22" name="__codelineno-22-22" href="#__codelineno-22-22"></a>    <span class="kd">public</span> <span class="n">Notification</span> <span class="n">getNotification</span><span class="p">()</span> <span class="p">{</span>
<a id="__codelineno-22-23" name="__codelineno-22-23" href="#__codelineno-22-23"></a>        <span class="k">return</span> <span class="n">customNotification</span><span class="p">;</span>
<a id="__codelineno-22-24" name="__codelineno-22-24" href="#__codelineno-22-24"></a>    <span class="p">}</span>
<a id="__codelineno-22-25" name="__codelineno-22-25" href="#__codelineno-22-25"></a>
<a id="__codelineno-22-26" name="__codelineno-22-26" href="#__codelineno-22-26"></a>    <span class="p">@</span><span class="n">Override</span>
<a id="__codelineno-22-27" name="__codelineno-22-27" href="#__codelineno-22-27"></a>    <span class="kd">public</span> <span class="n">int</span> <span class="n">getNotificationId</span><span class="p">()</span> <span class="p">{</span>
<a id="__codelineno-22-28" name="__codelineno-22-28" href="#__codelineno-22-28"></a>        <span class="k">return</span> <span class="n">CUSTOM_NOTIFICATION_ID</span><span class="p">;</span>
<a id="__codelineno-22-29" name="__codelineno-22-29" href="#__codelineno-22-29"></a>    <span class="p">}</span>
<a id="__codelineno-22-30" name="__codelineno-22-30" href="#__codelineno-22-30"></a>
<a id="__codelineno-22-31" name="__codelineno-22-31" href="#__codelineno-22-31"></a>    <span class="p">@</span><span class="n">Override</span>
<a id="__codelineno-22-32" name="__codelineno-22-32" href="#__codelineno-22-32"></a>    <span class="kd">public</span> <span class="n">void</span> <span class="n">updateNotification</span><span class="p">(</span><span class="n">RouteProgress</span> <span class="n">routeProgress</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-22-33" name="__codelineno-22-33" href="#__codelineno-22-33"></a>        <span class="c1">// Update the builder with a new number of updates</span>
<a id="__codelineno-22-34" name="__codelineno-22-34" href="#__codelineno-22-34"></a>        <span class="n">customNotificationBuilder</span><span class="p">.</span><span class="n">setContentText</span><span class="p">(</span><span class="s">&quot;Number of updates: &quot;</span> <span class="o">+</span> <span class="n">numberOfUpdates</span><span class="o">++</span><span class="p">);</span>
<a id="__codelineno-22-35" name="__codelineno-22-35" href="#__codelineno-22-35"></a>        <span class="n">notificationManager</span><span class="p">.</span><span class="n">notify</span><span class="p">(</span><span class="n">CUSTOM_NOTIFICATION_ID</span><span class="p">,</span> <span class="n">customNotificationBuilder</span><span class="p">.</span><span class="n">build</span><span class="p">());</span>
<a id="__codelineno-22-36" name="__codelineno-22-36" href="#__codelineno-22-36"></a>    <span class="p">}</span>
<a id="__codelineno-22-37" name="__codelineno-22-37" href="#__codelineno-22-37"></a>
<a id="__codelineno-22-38" name="__codelineno-22-38" href="#__codelineno-22-38"></a>    <span class="p">@</span><span class="n">Override</span>
<a id="__codelineno-22-39" name="__codelineno-22-39" href="#__codelineno-22-39"></a>    <span class="kd">public</span> <span class="n">void</span> <span class="n">onNavigationStopped</span><span class="p">(</span><span class="n">Context</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-22-40" name="__codelineno-22-40" href="#__codelineno-22-40"></a>        <span class="k">try</span> <span class="p">{</span>
<a id="__codelineno-22-41" name="__codelineno-22-41" href="#__codelineno-22-41"></a>            <span class="n">context</span><span class="p">.</span><span class="n">unregisterReceiver</span><span class="p">(</span><span class="n">stopNavigationReceiver</span><span class="p">);</span>
<a id="__codelineno-22-42" name="__codelineno-22-42" href="#__codelineno-22-42"></a>        <span class="p">}</span><span class="k">catch</span><span class="p">(</span><span class="n">Exception</span> <span class="n">e</span><span class="p">){}</span>
<a id="__codelineno-22-43" name="__codelineno-22-43" href="#__codelineno-22-43"></a>        <span class="n">notificationManager</span><span class="p">.</span><span class="n">cancel</span><span class="p">(</span><span class="n">CUSTOM_NOTIFICATION_ID</span><span class="p">);</span>
<a id="__codelineno-22-44" name="__codelineno-22-44" href="#__codelineno-22-44"></a>    <span class="p">}</span>
<a id="__codelineno-22-45" name="__codelineno-22-45" href="#__codelineno-22-45"></a>
<a id="__codelineno-22-46" name="__codelineno-22-46" href="#__codelineno-22-46"></a>    <span class="kd">public</span> <span class="n">void</span> <span class="n">register</span><span class="p">(</span><span class="n">BroadcastReceiver</span> <span class="n">stopNavigationReceiver</span><span class="p">,</span> <span class="n">Context</span> <span class="n">applicationContext</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-22-47" name="__codelineno-22-47" href="#__codelineno-22-47"></a>        <span class="n">this</span><span class="p">.</span><span class="n">stopNavigationReceiver</span> <span class="p">=</span> <span class="n">stopNavigationReceiver</span><span class="p">;</span>
<a id="__codelineno-22-48" name="__codelineno-22-48" href="#__codelineno-22-48"></a>        <span class="n">applicationContext</span><span class="p">.</span><span class="n">registerReceiver</span><span class="p">(</span><span class="n">stopNavigationReceiver</span><span class="p">,</span> <span class="n">new</span> <span class="n">IntentFilter</span><span class="p">(</span><span class="n">STOP_NAVIGATION_ACTION</span><span class="p">));</span>
<a id="__codelineno-22-49" name="__codelineno-22-49" href="#__codelineno-22-49"></a>    <span class="p">}</span>
<a id="__codelineno-22-50" name="__codelineno-22-50" href="#__codelineno-22-50"></a>
<a id="__codelineno-22-51" name="__codelineno-22-51" href="#__codelineno-22-51"></a>    <span class="kd">private</span> <span class="n">PendingIntent</span> <span class="n">createPendingStopIntent</span><span class="p">(</span><span class="n">Context</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-22-52" name="__codelineno-22-52" href="#__codelineno-22-52"></a>        <span class="n">Intent</span> <span class="n">stopNavigationIntent</span> <span class="p">=</span> <span class="n">new</span> <span class="n">Intent</span><span class="p">(</span><span class="n">STOP_NAVIGATION_ACTION</span><span class="p">);</span>
<a id="__codelineno-22-53" name="__codelineno-22-53" href="#__codelineno-22-53"></a>        <span class="k">return</span> <span class="n">PendingIntent</span><span class="p">.</span><span class="n">getBroadcast</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">stopNavigationIntent</span><span class="p">,</span> <span class="n">PendingIntent</span><span class="p">.</span><span class="n">FLAG_IMMUTABLE</span><span class="p">);</span>
<a id="__codelineno-22-54" name="__codelineno-22-54" href="#__codelineno-22-54"></a>    <span class="p">}</span>
<a id="__codelineno-22-55" name="__codelineno-22-55" href="#__codelineno-22-55"></a>
<a id="__codelineno-22-56" name="__codelineno-22-56" href="#__codelineno-22-56"></a>    <span class="p">@</span><span class="n">RequiresApi</span><span class="p">(</span><span class="n">Build</span><span class="p">.</span><span class="n">VERSION_CODES</span><span class="p">.</span><span class="n">O</span><span class="p">)</span>
<a id="__codelineno-22-57" name="__codelineno-22-57" href="#__codelineno-22-57"></a>    <span class="kd">public</span> <span class="n">void</span> <span class="n">createNotificationChannel</span><span class="p">(</span><span class="n">Context</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-22-58" name="__codelineno-22-58" href="#__codelineno-22-58"></a>        <span class="n">NotificationChannel</span> <span class="n">chan</span> <span class="p">=</span> <span class="n">new</span> <span class="n">NotificationChannel</span><span class="p">(</span><span class="n">NAVIGATION_NOTIFICATION_CHANNEL</span><span class="p">,</span> <span class="s">&quot;CustomNavigationNotification&quot;</span><span class="p">,</span> <span class="n">NotificationManager</span><span class="p">.</span><span class="n">IMPORTANCE_NONE</span><span class="p">);</span>
<a id="__codelineno-22-59" name="__codelineno-22-59" href="#__codelineno-22-59"></a>        <span class="n">chan</span><span class="p">.</span><span class="n">setLightColor</span><span class="p">(</span><span class="n">Color</span><span class="p">.</span><span class="n">BLUE</span><span class="p">);</span>
<a id="__codelineno-22-60" name="__codelineno-22-60" href="#__codelineno-22-60"></a>        <span class="n">chan</span><span class="p">.</span><span class="n">setLockscreenVisibility</span><span class="p">(</span><span class="n">Notification</span><span class="p">.</span><span class="n">VISIBILITY_PRIVATE</span><span class="p">);</span>
<a id="__codelineno-22-61" name="__codelineno-22-61" href="#__codelineno-22-61"></a>        <span class="n">NotificationManager</span> <span class="n">service</span> <span class="p">=</span> <span class="p">(</span><span class="n">NotificationManager</span><span class="p">)</span> <span class="n">context</span><span class="p">.</span><span class="n">getSystemService</span><span class="p">(</span><span class="n">Context</span><span class="p">.</span><span class="n">NOTIFICATION_SERVICE</span><span class="p">);</span>
<a id="__codelineno-22-62" name="__codelineno-22-62" href="#__codelineno-22-62"></a>        <span class="k">if</span> <span class="p">(</span><span class="n">service</span> <span class="o">!=</span> <span class="n">null</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-22-63" name="__codelineno-22-63" href="#__codelineno-22-63"></a>            <span class="n">service</span><span class="p">.</span><span class="n">createNotificationChannel</span><span class="p">(</span><span class="n">chan</span><span class="p">);</span>
<a id="__codelineno-22-64" name="__codelineno-22-64" href="#__codelineno-22-64"></a>        <span class="p">}</span>
<a id="__codelineno-22-65" name="__codelineno-22-65" href="#__codelineno-22-65"></a>    <span class="p">}</span>
<a id="__codelineno-22-66" name="__codelineno-22-66" href="#__codelineno-22-66"></a><span class="p">}</span>
</code></pre></div></p>
<p>After calling the fetchRoute function, you will receive the result in the listener as follows:
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>    <span class="p">@</span><span class="n">Override</span>
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>    <span class="kd">public</span> <span class="n">void</span> <span class="n">onResponse</span><span class="p">(</span><span class="n">Call</span><span class="p">&lt;</span><span class="n">DirectionsResponse</span><span class="p">&gt;</span> <span class="n">call</span><span class="p">,</span> <span class="n">Response</span><span class="p">&lt;</span><span class="n">DirectionsResponse</span><span class="p">&gt;</span> <span class="n">response</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>        <span class="k">if</span> <span class="p">(</span><span class="n">validRouteResponse</span><span class="p">(</span><span class="n">response</span><span class="p">))</span> <span class="p">{</span>
<a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a>            <span class="k">if</span> <span class="p">(</span><span class="n">reRoute</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a>                <span class="n">route</span> <span class="p">=</span> <span class="n">response</span><span class="p">.</span><span class="n">body</span><span class="p">().</span><span class="n">routes</span><span class="p">().</span><span class="kr">get</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a>                <span class="n">initNavigationOptions</span><span class="p">();</span>
<a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a>                <span class="n">navigationView</span><span class="p">.</span><span class="n">updateCameraRouteOverview</span><span class="p">();</span>
<a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a>                <span class="n">mapboxNavigation</span><span class="p">.</span><span class="n">addNavigationEventListener</span><span class="p">(</span><span class="n">this</span><span class="p">);</span>
<a id="__codelineno-23-9" name="__codelineno-23-9" href="#__codelineno-23-9"></a>                <span class="n">mapboxNavigation</span><span class="p">.</span><span class="n">startNavigation</span><span class="p">(</span><span class="n">route</span><span class="p">);</span>
<a id="__codelineno-23-10" name="__codelineno-23-10" href="#__codelineno-23-10"></a>                <span class="n">navigationView</span><span class="p">.</span><span class="n">startNavigation</span><span class="p">(</span><span class="n">this</span><span class="p">.</span><span class="n">mapviewNavigationOptions</span><span class="p">.</span><span class="n">build</span><span class="p">());</span>
<a id="__codelineno-23-11" name="__codelineno-23-11" href="#__codelineno-23-11"></a>                <span class="n">reRoute</span> <span class="p">=</span> <span class="kc">false</span><span class="p">;</span>
<a id="__codelineno-23-12" name="__codelineno-23-12" href="#__codelineno-23-12"></a>                <span class="n">isArrived</span><span class="p">=</span><span class="kc">false</span><span class="p">;</span>
<a id="__codelineno-23-13" name="__codelineno-23-13" href="#__codelineno-23-13"></a>            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<a id="__codelineno-23-14" name="__codelineno-23-14" href="#__codelineno-23-14"></a>                <span class="n">launchNavigationFab</span><span class="p">.</span><span class="n">show</span><span class="p">();</span>
<a id="__codelineno-23-15" name="__codelineno-23-15" href="#__codelineno-23-15"></a>                <span class="n">route</span> <span class="p">=</span> <span class="n">response</span><span class="p">.</span><span class="n">body</span><span class="p">().</span><span class="n">routes</span><span class="p">().</span><span class="kr">get</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<a id="__codelineno-23-16" name="__codelineno-23-16" href="#__codelineno-23-16"></a>                <span class="n">mapRoute</span><span class="p">.</span><span class="n">addRoutes</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">body</span><span class="p">().</span><span class="n">routes</span><span class="p">());</span>
<a id="__codelineno-23-17" name="__codelineno-23-17" href="#__codelineno-23-17"></a>                <span class="k">if</span> <span class="p">(</span><span class="n">isNavigationRunning</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-23-18" name="__codelineno-23-18" href="#__codelineno-23-18"></a>                    <span class="n">launchNavigation</span><span class="p">();</span>
<a id="__codelineno-23-19" name="__codelineno-23-19" href="#__codelineno-23-19"></a>                <span class="p">}</span>
<a id="__codelineno-23-20" name="__codelineno-23-20" href="#__codelineno-23-20"></a>            <span class="p">}</span>
<a id="__codelineno-23-21" name="__codelineno-23-21" href="#__codelineno-23-21"></a>        <span class="p">}</span>
<a id="__codelineno-23-22" name="__codelineno-23-22" href="#__codelineno-23-22"></a>    <span class="p">}</span>
</code></pre></div></p>
<h2 id="start-navigation">Start navigation<a class="headerlink" href="#start-navigation" title="Permanent link">&para;</a></h2>
<p>After successfully fetching the route, the next step is to configure some options to start the navigation
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="n">void</span> <span class="n">initNavigationOptions</span><span class="p">(){</span>
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>        <span class="n">MapboxNavigationOptions</span> <span class="n">navigationOptions</span> <span class="p">=</span> <span class="n">MapboxNavigationOptions</span><span class="p">.</span><span class="n">builder</span><span class="p">()</span>
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>                <span class="p">.</span><span class="n">build</span><span class="p">();</span>
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a>        <span class="n">mapviewNavigationOptions</span> <span class="p">=</span><span class="n">NavigationViewOptions</span><span class="p">.</span><span class="n">builder</span><span class="p">()</span>
<a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a>                <span class="p">.</span><span class="n">navigationListener</span><span class="p">(</span><span class="n">this</span><span class="p">)</span>
<a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a>                <span class="p">.</span><span class="n">routeListener</span><span class="p">(</span><span class="n">this</span><span class="p">)</span>
<a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a>                <span class="p">.</span><span class="n">navigationOptions</span><span class="p">(</span><span class="n">navigationOptions</span><span class="p">)</span>
<a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a>                <span class="p">.</span><span class="n">locationEngine</span><span class="p">(</span><span class="n">locationEngine</span><span class="p">)</span>
<a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a>                <span class="p">.</span><span class="n">shouldSimulateRoute</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span>
<a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a>                <span class="p">.</span><span class="n">progressChangeListener</span><span class="p">(</span><span class="n">progressChangeListener</span><span class="p">)</span>
<a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a>                <span class="p">.</span><span class="n">directionsRoute</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
<a id="__codelineno-24-12" name="__codelineno-24-12" href="#__codelineno-24-12"></a>                <span class="p">.</span><span class="n">onMoveListener</span><span class="p">(</span><span class="n">this</span><span class="p">);</span>
<a id="__codelineno-24-13" name="__codelineno-24-13" href="#__codelineno-24-13"></a>    <span class="p">}</span>
</code></pre></div></p>
<p>The <code>progressChangeListener</code> function returns two pieces of information: location (the current location of the user) and <code>routeProgress</code> (information about the current route the user is traversing, including the next maneuver, remaining distance, etc.). 
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>    <span class="kd">private</span> <span class="n">ProgressChangeListener</span> <span class="n">progressChangeListener</span> <span class="p">=</span> <span class="p">(</span><span class="n">location</span><span class="p">,</span> <span class="n">routeProgress</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="p">{</span>
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>        <span class="n">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="bp">println</span><span class="p">(</span><span class="s">&quot;Progress Changing&quot;</span><span class="p">);</span>
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>    <span class="p">};</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>    <span class="kd">private</span> <span class="n">boolean</span> <span class="n">validRouteResponse</span><span class="p">(</span><span class="n">Response</span><span class="p">&lt;</span><span class="n">DirectionsResponse</span><span class="p">&gt;</span> <span class="n">response</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>        <span class="k">return</span> <span class="n">response</span><span class="p">.</span><span class="n">body</span><span class="p">()</span> <span class="o">!=</span> <span class="n">null</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">response</span><span class="p">.</span><span class="n">body</span><span class="p">().</span><span class="n">routes</span><span class="p">().</span><span class="bp">isEmpty</span><span class="p">();</span>
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a>    <span class="p">}</span>
</code></pre></div></p>
<p><code>initNavigationOptions</code> will be called before starting the navigation.
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>    <span class="kd">private</span> <span class="n">void</span> <span class="n">launchNavigation</span><span class="p">()</span> <span class="p">{</span>
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>        <span class="n">launchNavigationFab</span><span class="p">.</span><span class="n">hide</span><span class="p">();</span>
<a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a>        <span class="n">navigationView</span><span class="p">.</span><span class="n">setVisibility</span><span class="p">(</span><span class="n">View</span><span class="p">.</span><span class="n">VISIBLE</span><span class="p">);</span>
<a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>        <span class="n">mapboxNavigation</span><span class="p">.</span><span class="n">addOffRouteListener</span><span class="p">(</span><span class="n">this</span><span class="p">);</span>
<a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a>        <span class="n">initNavigationOptions</span><span class="p">();</span>
<a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a>        <span class="n">mapboxNavigation</span><span class="p">.</span><span class="n">startNavigation</span><span class="p">(</span><span class="n">route</span><span class="p">);</span>
<a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a>        <span class="n">navigationView</span><span class="p">.</span><span class="n">startNavigation</span><span class="p">(</span><span class="n">this</span><span class="p">.</span><span class="n">mapviewNavigationOptions</span><span class="p">.</span><span class="n">build</span><span class="p">());</span>
<a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a>        <span class="n">isArrived</span><span class="p">=</span><span class="kc">false</span><span class="p">;</span>
<a id="__codelineno-27-9" name="__codelineno-27-9" href="#__codelineno-27-9"></a>    <span class="p">}</span>
</code></pre></div></p>
<ul>
<li>
<p>The <code>launchNavigation</code>function is called on a button click event, as specified by the user.</p>
</li>
<li>
<p>In the <code>launchNavigation</code> function, there are two startNavigation methods being invoked:</p>
</li>
<li>The <code>startNavigation</code> method of the <code>mapboxNavigation</code> instance is called. This method serves as a controller to listen to the navigation state and provides access to all the information about the ongoing trip.</li>
<li>The <code>startNavigation</code> method of the <code>navigationView</code> is called to begin displaying the navigation UI on the screen.
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>    <span class="p">@</span><span class="n">Override</span>
<a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a>    <span class="kd">public</span> <span class="n">void</span> <span class="n">userOffRoute</span><span class="p">(</span><span class="n">Location</span> <span class="n">location</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a>        <span class="k">if</span><span class="p">(</span><span class="n">isArrived</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
<a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a>            <span class="n">reRoute</span> <span class="p">=</span> <span class="kc">true</span><span class="p">;</span>
<a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a>            <span class="n">fetchRoute</span><span class="p">(</span><span class="n">Point</span><span class="p">.</span><span class="n">fromLngLat</span><span class="p">(</span><span class="n">location</span><span class="p">.</span><span class="n">getLongitude</span><span class="p">(),</span> <span class="n">location</span><span class="p">.</span><span class="n">getLatitude</span><span class="p">()),</span> <span class="n">destination</span><span class="p">);</span>
<a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a>    <span class="p">}</span>  
</code></pre></div>
<code>userOffRoute</code> function listens for when the user deviates from the returned route and then finds a more suitable alternative route based on the current user's direction of travel. 
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>    <span class="p">@</span><span class="n">Override</span>
<a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a>    <span class="kd">public</span> <span class="n">void</span> <span class="n">onProgressChange</span><span class="p">(</span><span class="n">Location</span> <span class="n">location</span><span class="p">,</span> <span class="n">RouteProgress</span> <span class="n">routeProgress</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a>
<a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a>    <span class="p">}</span>
</code></pre></div>
<code>onProgressChange</code> function listens for the user's movement and continuously updates information about the route the user is traveling on, remaining distance, etc. 
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>    <span class="p">@</span><span class="n">Override</span>
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>    <span class="kd">public</span> <span class="n">void</span> <span class="n">onArrival</span><span class="p">()</span> <span class="p">{</span>
<a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a>        <span class="k">if</span><span class="p">(</span><span class="n">isArrived</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
<a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a>        <span class="c1">//Xử lý thông báo và kết thúc dẫn đường tại đây</span>
<a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a>        <span class="n">isArrived</span><span class="p">=</span><span class="kc">true</span><span class="p">;</span>
<a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a>    <span class="p">}</span>
</code></pre></div>
<code>onArrival</code> function listens for when the user has arrived at the destination and allows you to create custom notifications or alerts for the user.
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>    <span class="p">@</span><span class="n">Override</span>
<a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a>    <span class="kd">public</span> <span class="n">boolean</span> <span class="n">onMapClick</span><span class="p">(@</span><span class="n">NonNull</span> <span class="n">LatLng</span> <span class="n">latLng</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a>        <span class="n">getCurrentLocation</span><span class="p">();</span>
<a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a>        <span class="n">destination</span> <span class="p">=</span> <span class="n">Point</span><span class="p">.</span><span class="n">fromLngLat</span><span class="p">(</span><span class="n">latLng</span><span class="p">.</span><span class="n">getLongitude</span><span class="p">(),</span> <span class="n">latLng</span><span class="p">.</span><span class="n">getLatitude</span><span class="p">());</span>
<a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a>        <span class="k">if</span> <span class="p">(</span><span class="n">origin</span> <span class="o">!=</span> <span class="n">null</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a>            <span class="n">fetchRoute</span><span class="p">(</span><span class="n">origin</span><span class="p">,</span> <span class="n">destination</span><span class="p">);</span>
<a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a>        <span class="p">}</span>
<a id="__codelineno-31-8" name="__codelineno-31-8" href="#__codelineno-31-8"></a>        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
<a id="__codelineno-31-9" name="__codelineno-31-9" href="#__codelineno-31-9"></a>    <span class="p">}</span>
</code></pre></div></li>
</ul>
<p><code>onMapClick</code> function receives the current location and retrieves the route from the current location to the location selected by the user.</p>
<p>Add the following callback functions to ensure proper initialization and memory management, as well as handling user actions. The <code>NavigationView</code> component should be linked to the activity's lifecycle using the provided callbacks. This allows the <code>NavigationView</code> to correctly handle the activity's lifecycle and provide corresponding responses.
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a>    <span class="p">@</span><span class="n">Override</span>
<a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a>    <span class="kd">public</span> <span class="n">void</span> <span class="n">onStart</span><span class="p">()</span> <span class="p">{</span>
<a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a>        <span class="kc">super</span><span class="p">.</span><span class="n">onStart</span><span class="p">();</span>
<a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a>        <span class="n">navigationView</span><span class="p">.</span><span class="n">onStart</span><span class="p">();</span>
<a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a>        <span class="n">mapView</span><span class="p">.</span><span class="n">onStart</span><span class="p">();</span>
<a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a>    <span class="p">}</span>
<a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a>
<a id="__codelineno-32-8" name="__codelineno-32-8" href="#__codelineno-32-8"></a>    <span class="p">@</span><span class="n">Override</span>
<a id="__codelineno-32-9" name="__codelineno-32-9" href="#__codelineno-32-9"></a>        <span class="kd">public</span> <span class="n">void</span> <span class="n">onResume</span><span class="p">()</span> <span class="p">{</span>
<a id="__codelineno-32-10" name="__codelineno-32-10" href="#__codelineno-32-10"></a>        <span class="kc">super</span><span class="p">.</span><span class="n">onResume</span><span class="p">();</span>
<a id="__codelineno-32-11" name="__codelineno-32-11" href="#__codelineno-32-11"></a>        <span class="n">navigationView</span><span class="p">.</span><span class="n">onResume</span><span class="p">();</span>
<a id="__codelineno-32-12" name="__codelineno-32-12" href="#__codelineno-32-12"></a>        <span class="n">mapView</span><span class="p">.</span><span class="n">onResume</span><span class="p">();</span>
<a id="__codelineno-32-13" name="__codelineno-32-13" href="#__codelineno-32-13"></a>        <span class="k">if</span> <span class="p">(</span><span class="n">locationEngine</span> <span class="o">!=</span> <span class="n">null</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-32-14" name="__codelineno-32-14" href="#__codelineno-32-14"></a>        <span class="p">}</span>
<a id="__codelineno-32-15" name="__codelineno-32-15" href="#__codelineno-32-15"></a>    <span class="p">}</span>
<a id="__codelineno-32-16" name="__codelineno-32-16" href="#__codelineno-32-16"></a>
<a id="__codelineno-32-17" name="__codelineno-32-17" href="#__codelineno-32-17"></a>    <span class="p">@</span><span class="n">Override</span>
<a id="__codelineno-32-18" name="__codelineno-32-18" href="#__codelineno-32-18"></a>    <span class="kd">public</span> <span class="n">void</span> <span class="n">onLowMemory</span><span class="p">()</span> <span class="p">{</span>
<a id="__codelineno-32-19" name="__codelineno-32-19" href="#__codelineno-32-19"></a>        <span class="kc">super</span><span class="p">.</span><span class="n">onLowMemory</span><span class="p">();</span>
<a id="__codelineno-32-20" name="__codelineno-32-20" href="#__codelineno-32-20"></a>        <span class="n">navigationView</span><span class="p">.</span><span class="n">onLowMemory</span><span class="p">();</span>
<a id="__codelineno-32-21" name="__codelineno-32-21" href="#__codelineno-32-21"></a>        <span class="n">mapView</span><span class="p">.</span><span class="n">onLowMemory</span><span class="p">();</span>
<a id="__codelineno-32-22" name="__codelineno-32-22" href="#__codelineno-32-22"></a>    <span class="p">}</span>
<a id="__codelineno-32-23" name="__codelineno-32-23" href="#__codelineno-32-23"></a>
<a id="__codelineno-32-24" name="__codelineno-32-24" href="#__codelineno-32-24"></a>    <span class="p">@</span><span class="n">Override</span>
<a id="__codelineno-32-25" name="__codelineno-32-25" href="#__codelineno-32-25"></a>    <span class="kd">public</span> <span class="n">void</span> <span class="n">onBackPressed</span><span class="p">()</span> <span class="p">{</span>
<a id="__codelineno-32-26" name="__codelineno-32-26" href="#__codelineno-32-26"></a>        <span class="n">stopNavigationFunction</span><span class="p">();</span>
<a id="__codelineno-32-27" name="__codelineno-32-27" href="#__codelineno-32-27"></a>
<a id="__codelineno-32-28" name="__codelineno-32-28" href="#__codelineno-32-28"></a>        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">navigationView</span><span class="p">.</span><span class="n">onBackPressed</span><span class="p">())</span> <span class="p">{</span>
<a id="__codelineno-32-29" name="__codelineno-32-29" href="#__codelineno-32-29"></a>            <span class="kc">super</span><span class="p">.</span><span class="n">onBackPressed</span><span class="p">();</span>
<a id="__codelineno-32-30" name="__codelineno-32-30" href="#__codelineno-32-30"></a>        <span class="p">}</span>
<a id="__codelineno-32-31" name="__codelineno-32-31" href="#__codelineno-32-31"></a>    <span class="p">}</span>
<a id="__codelineno-32-32" name="__codelineno-32-32" href="#__codelineno-32-32"></a>
<a id="__codelineno-32-33" name="__codelineno-32-33" href="#__codelineno-32-33"></a>    <span class="p">@</span><span class="n">Override</span>
<a id="__codelineno-32-34" name="__codelineno-32-34" href="#__codelineno-32-34"></a>    <span class="n">protected</span> <span class="n">void</span> <span class="n">onSaveInstanceState</span><span class="p">(</span><span class="n">Bundle</span> <span class="n">outState</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-32-35" name="__codelineno-32-35" href="#__codelineno-32-35"></a>        <span class="n">navigationView</span><span class="p">.</span><span class="n">onSaveInstanceState</span><span class="p">(</span><span class="n">outState</span><span class="p">);</span>
<a id="__codelineno-32-36" name="__codelineno-32-36" href="#__codelineno-32-36"></a>        <span class="n">mapView</span><span class="p">.</span><span class="n">onSaveInstanceState</span><span class="p">(</span><span class="n">outState</span><span class="p">);</span>
<a id="__codelineno-32-37" name="__codelineno-32-37" href="#__codelineno-32-37"></a>        <span class="kc">super</span><span class="p">.</span><span class="n">onSaveInstanceState</span><span class="p">(</span><span class="n">outState</span><span class="p">);</span>
<a id="__codelineno-32-38" name="__codelineno-32-38" href="#__codelineno-32-38"></a>    <span class="p">}</span>
<a id="__codelineno-32-39" name="__codelineno-32-39" href="#__codelineno-32-39"></a>
<a id="__codelineno-32-40" name="__codelineno-32-40" href="#__codelineno-32-40"></a>    <span class="p">@</span><span class="n">Override</span>
<a id="__codelineno-32-41" name="__codelineno-32-41" href="#__codelineno-32-41"></a>    <span class="n">protected</span> <span class="n">void</span> <span class="n">onRestoreInstanceState</span><span class="p">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-32-42" name="__codelineno-32-42" href="#__codelineno-32-42"></a>        <span class="kc">super</span><span class="p">.</span><span class="n">onRestoreInstanceState</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">);</span>
<a id="__codelineno-32-43" name="__codelineno-32-43" href="#__codelineno-32-43"></a>        <span class="n">navigationView</span><span class="p">.</span><span class="n">onRestoreInstanceState</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">);</span>
<a id="__codelineno-32-44" name="__codelineno-32-44" href="#__codelineno-32-44"></a>    <span class="p">}</span>
<a id="__codelineno-32-45" name="__codelineno-32-45" href="#__codelineno-32-45"></a>
<a id="__codelineno-32-46" name="__codelineno-32-46" href="#__codelineno-32-46"></a>    <span class="p">@</span><span class="n">Override</span>
<a id="__codelineno-32-47" name="__codelineno-32-47" href="#__codelineno-32-47"></a>    <span class="kd">public</span> <span class="n">void</span> <span class="n">onPause</span><span class="p">()</span> <span class="p">{</span>
<a id="__codelineno-32-48" name="__codelineno-32-48" href="#__codelineno-32-48"></a>        <span class="kc">super</span><span class="p">.</span><span class="n">onPause</span><span class="p">();</span>
<a id="__codelineno-32-49" name="__codelineno-32-49" href="#__codelineno-32-49"></a>        <span class="n">navigationView</span><span class="p">.</span><span class="n">onPause</span><span class="p">();</span>
<a id="__codelineno-32-50" name="__codelineno-32-50" href="#__codelineno-32-50"></a>        <span class="n">mapView</span><span class="p">.</span><span class="n">onPause</span><span class="p">();</span>
<a id="__codelineno-32-51" name="__codelineno-32-51" href="#__codelineno-32-51"></a>        <span class="k">if</span> <span class="p">(</span><span class="n">locationEngine</span> <span class="o">!=</span> <span class="n">null</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-32-52" name="__codelineno-32-52" href="#__codelineno-32-52"></a>        <span class="p">}</span>
<a id="__codelineno-32-53" name="__codelineno-32-53" href="#__codelineno-32-53"></a>    <span class="p">}</span>
<a id="__codelineno-32-54" name="__codelineno-32-54" href="#__codelineno-32-54"></a>
<a id="__codelineno-32-55" name="__codelineno-32-55" href="#__codelineno-32-55"></a>    <span class="p">@</span><span class="n">Override</span>
<a id="__codelineno-32-56" name="__codelineno-32-56" href="#__codelineno-32-56"></a>    <span class="kd">public</span> <span class="n">void</span> <span class="n">onStop</span><span class="p">()</span> <span class="p">{</span>
<a id="__codelineno-32-57" name="__codelineno-32-57" href="#__codelineno-32-57"></a>        <span class="kc">super</span><span class="p">.</span><span class="n">onStop</span><span class="p">();</span>
<a id="__codelineno-32-58" name="__codelineno-32-58" href="#__codelineno-32-58"></a>        <span class="n">navigationView</span><span class="p">.</span><span class="n">onStop</span><span class="p">();</span>
<a id="__codelineno-32-59" name="__codelineno-32-59" href="#__codelineno-32-59"></a>        <span class="n">mapView</span><span class="p">.</span><span class="n">onStop</span><span class="p">();</span>
<a id="__codelineno-32-60" name="__codelineno-32-60" href="#__codelineno-32-60"></a>    <span class="p">}</span>
<a id="__codelineno-32-61" name="__codelineno-32-61" href="#__codelineno-32-61"></a>
<a id="__codelineno-32-62" name="__codelineno-32-62" href="#__codelineno-32-62"></a>    <span class="p">@</span><span class="n">Override</span>
<a id="__codelineno-32-63" name="__codelineno-32-63" href="#__codelineno-32-63"></a>    <span class="n">protected</span> <span class="n">void</span> <span class="n">onDestroy</span><span class="p">()</span> <span class="p">{</span>
<a id="__codelineno-32-64" name="__codelineno-32-64" href="#__codelineno-32-64"></a>        <span class="kc">super</span><span class="p">.</span><span class="n">onDestroy</span><span class="p">();</span>
<a id="__codelineno-32-65" name="__codelineno-32-65" href="#__codelineno-32-65"></a>        <span class="n">navigationView</span><span class="p">.</span><span class="n">onDestroy</span><span class="p">();</span>
<a id="__codelineno-32-66" name="__codelineno-32-66" href="#__codelineno-32-66"></a>        <span class="n">mapView</span><span class="p">.</span><span class="n">onDestroy</span><span class="p">();</span>
<a id="__codelineno-32-67" name="__codelineno-32-67" href="#__codelineno-32-67"></a>        <span class="k">if</span> <span class="p">(</span><span class="n">locationEngine</span> <span class="o">!=</span> <span class="n">null</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-32-68" name="__codelineno-32-68" href="#__codelineno-32-68"></a>        <span class="p">}</span>
<a id="__codelineno-32-69" name="__codelineno-32-69" href="#__codelineno-32-69"></a>    <span class="p">}</span>
</code></pre></div></p>
<p>In MainActivity, add a function to check location permissions and a button to navigate to the navigation screen
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainActivity</span> <span class="n">extends</span> <span class="n">AppCompatActivity</span> <span class="n">implements</span> <span class="n">PermissionsListener</span> <span class="p">{</span>
<a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a>
<a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a>    <span class="kd">private</span> <span class="n">PermissionsManager</span> <span class="n">permissionsManager</span><span class="p">;</span>
<a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a>    <span class="p">@</span><span class="n">Override</span>
<a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a>    <span class="n">protected</span> <span class="n">void</span> <span class="n">onCreate</span><span class="p">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a>        <span class="kc">super</span><span class="p">.</span><span class="n">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">);</span>
<a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a>        <span class="n">setContentView</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="n">layout</span><span class="p">.</span><span class="n">activity_main</span><span class="p">);</span>
<a id="__codelineno-33-8" name="__codelineno-33-8" href="#__codelineno-33-8"></a>        <span class="n">Button</span> <span class="n">button</span> <span class="p">=</span>  <span class="n">findViewById</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="n">id</span><span class="p">.</span><span class="n">pushToNavigationScreen</span><span class="p">);</span>
<a id="__codelineno-33-9" name="__codelineno-33-9" href="#__codelineno-33-9"></a>        <span class="n">Intent</span> <span class="n">it</span> <span class="p">=</span> <span class="n">new</span> <span class="n">Intent</span><span class="p">(</span><span class="n">this</span><span class="p">,</span> <span class="n">VietMapNavigationActivity</span><span class="p">.</span><span class="kd">class</span><span class="p">);</span>
<a id="__codelineno-33-10" name="__codelineno-33-10" href="#__codelineno-33-10"></a>        <span class="n">button</span><span class="p">.</span><span class="n">setOnClickListener</span><span class="p">(</span><span class="n">view</span> <span class="p">-&gt;</span> <span class="n">startActivity</span><span class="p">(</span><span class="n">it</span><span class="p">));</span>
<a id="__codelineno-33-11" name="__codelineno-33-11" href="#__codelineno-33-11"></a>        <span class="n">permissionsManager</span> <span class="p">=</span> <span class="n">new</span> <span class="n">PermissionsManager</span><span class="p">(</span><span class="n">this</span><span class="p">);</span>
<a id="__codelineno-33-12" name="__codelineno-33-12" href="#__codelineno-33-12"></a>        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">PermissionsManager</span><span class="p">.</span><span class="n">areLocationPermissionsGranted</span><span class="p">(</span><span class="n">this</span><span class="p">))</span> <span class="p">{</span>
<a id="__codelineno-33-13" name="__codelineno-33-13" href="#__codelineno-33-13"></a>            <span class="n">permissionsManager</span><span class="p">.</span><span class="n">requestLocationPermissions</span><span class="p">(</span><span class="n">this</span><span class="p">);</span>
<a id="__codelineno-33-14" name="__codelineno-33-14" href="#__codelineno-33-14"></a>        <span class="p">}</span>
<a id="__codelineno-33-15" name="__codelineno-33-15" href="#__codelineno-33-15"></a>    <span class="p">}</span>
<a id="__codelineno-33-16" name="__codelineno-33-16" href="#__codelineno-33-16"></a>
<a id="__codelineno-33-17" name="__codelineno-33-17" href="#__codelineno-33-17"></a>    <span class="p">@</span><span class="n">Override</span>
<a id="__codelineno-33-18" name="__codelineno-33-18" href="#__codelineno-33-18"></a>    <span class="kd">public</span> <span class="n">void</span> <span class="n">onRequestPermissionsResult</span><span class="p">(</span><span class="n">int</span> <span class="n">requestCode</span><span class="p">,</span> <span class="p">@</span><span class="n">NonNull</span> <span class="nb">String</span><span class="p">[]</span> <span class="n">permissions</span><span class="p">,</span>
<a id="__codelineno-33-19" name="__codelineno-33-19" href="#__codelineno-33-19"></a>                                           <span class="p">@</span><span class="n">NonNull</span> <span class="n">int</span><span class="p">[]</span> <span class="n">grantResults</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-33-20" name="__codelineno-33-20" href="#__codelineno-33-20"></a>        <span class="kc">super</span><span class="p">.</span><span class="n">onRequestPermissionsResult</span><span class="p">(</span><span class="n">requestCode</span><span class="p">,</span> <span class="n">permissions</span><span class="p">,</span> <span class="n">grantResults</span><span class="p">);</span>
<a id="__codelineno-33-21" name="__codelineno-33-21" href="#__codelineno-33-21"></a>        <span class="n">permissionsManager</span><span class="p">.</span><span class="n">onRequestPermissionsResult</span><span class="p">(</span><span class="n">requestCode</span><span class="p">,</span> <span class="n">permissions</span><span class="p">,</span> <span class="n">grantResults</span><span class="p">);</span>
<a id="__codelineno-33-22" name="__codelineno-33-22" href="#__codelineno-33-22"></a>    <span class="p">}</span>
<a id="__codelineno-33-23" name="__codelineno-33-23" href="#__codelineno-33-23"></a>
<a id="__codelineno-33-24" name="__codelineno-33-24" href="#__codelineno-33-24"></a>    <span class="p">@</span><span class="n">Override</span>
<a id="__codelineno-33-25" name="__codelineno-33-25" href="#__codelineno-33-25"></a>    <span class="kd">public</span> <span class="n">void</span> <span class="n">onExplanationNeeded</span><span class="p">(</span><span class="n">List</span><span class="p">&lt;</span><span class="nb">String</span><span class="p">&gt;</span> <span class="n">permissionsToExplain</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-33-26" name="__codelineno-33-26" href="#__codelineno-33-26"></a>        <span class="n">Toast</span><span class="p">.</span><span class="n">makeText</span><span class="p">(</span><span class="n">this</span><span class="p">,</span> <span class="s">&quot;This app needs location permissions in order to show its functionality.&quot;</span><span class="p">,</span>
<a id="__codelineno-33-27" name="__codelineno-33-27" href="#__codelineno-33-27"></a>                <span class="n">Toast</span><span class="p">.</span><span class="n">LENGTH_LONG</span><span class="p">).</span><span class="n">show</span><span class="p">();</span>
<a id="__codelineno-33-28" name="__codelineno-33-28" href="#__codelineno-33-28"></a>    <span class="p">}</span>
<a id="__codelineno-33-29" name="__codelineno-33-29" href="#__codelineno-33-29"></a>
<a id="__codelineno-33-30" name="__codelineno-33-30" href="#__codelineno-33-30"></a>    <span class="p">@</span><span class="n">Override</span>
<a id="__codelineno-33-31" name="__codelineno-33-31" href="#__codelineno-33-31"></a>    <span class="kd">public</span> <span class="n">void</span> <span class="n">onPermissionResult</span><span class="p">(</span><span class="n">boolean</span> <span class="n">granted</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-33-32" name="__codelineno-33-32" href="#__codelineno-33-32"></a>        <span class="k">if</span> <span class="p">(</span><span class="n">granted</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-33-33" name="__codelineno-33-33" href="#__codelineno-33-33"></a>        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<a id="__codelineno-33-34" name="__codelineno-33-34" href="#__codelineno-33-34"></a>            <span class="n">Toast</span><span class="p">.</span><span class="n">makeText</span><span class="p">(</span><span class="n">this</span><span class="p">,</span> <span class="s">&quot;You didn&#39;t grant location permissions.&quot;</span><span class="p">,</span>
<a id="__codelineno-33-35" name="__codelineno-33-35" href="#__codelineno-33-35"></a>                    <span class="n">Toast</span><span class="p">.</span><span class="n">LENGTH_LONG</span><span class="p">).</span><span class="n">show</span><span class="p">();</span>
<a id="__codelineno-33-36" name="__codelineno-33-36" href="#__codelineno-33-36"></a>        <span class="p">}</span>
<a id="__codelineno-33-37" name="__codelineno-33-37" href="#__codelineno-33-37"></a>    <span class="p">}</span>
<a id="__codelineno-33-38" name="__codelineno-33-38" href="#__codelineno-33-38"></a><span class="p">}</span>
</code></pre></div></p>
<p>In the <code>activity_main.xml</code> file, add a layout for the button above
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a>    <span class="p">&lt;</span><span class="n">Button</span>
<a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a>        <span class="n">android</span><span class="p">:</span><span class="n">id</span><span class="p">=</span><span class="s">&quot;@+id/pushToNavigationScreen&quot;</span>
<a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a>        <span class="n">android</span><span class="p">:</span><span class="n">layout_width</span><span class="p">=</span><span class="s">&quot;wrap_content&quot;</span>
<a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a>        <span class="n">android</span><span class="p">:</span><span class="n">layout_height</span><span class="p">=</span><span class="s">&quot;wrap_content&quot;</span>
<a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a>        <span class="n">android</span><span class="p">:</span><span class="n">text</span><span class="p">=</span><span class="s">&quot;Start to VietMapNavigationScreen&quot;</span>
<a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a>        <span class="n">tools</span><span class="p">:</span><span class="n">ignore</span><span class="p">=</span><span class="s">&quot;MissingConstraints&quot;</span> <span class="o">/&gt;</span>
</code></pre></div></p>
<h2 id="customise-ui">Customise UI<a class="headerlink" href="#customise-ui" title="Permanent link">&para;</a></h2>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a>    navigationView.initViewConfig(true);
</code></pre></div>
<code>onCreate</code> function, add the following code snippet above to hide the default UI elements, leaving only the map and navigation components. The provided information for the trip will be displayed in full. Add this code into layout xml file in <code>VietmapNavigationActivity</code>
<div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a>    <span class="p">&lt;</span><span class="n">androidx</span><span class="p">.</span><span class="n">appcompat</span><span class="p">.</span><span class="n">widget</span><span class="p">.</span><span class="n">LinearLayoutCompat</span>
<a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a>        <span class="n">android</span><span class="p">:</span><span class="n">layout_width</span><span class="p">=</span><span class="s">&quot;match_parent&quot;</span>
<a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a>        <span class="n">android</span><span class="p">:</span><span class="n">layout_height</span><span class="p">=</span><span class="s">&quot;wrap_content&quot;</span>
<a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a>        <span class="n">app</span><span class="p">:</span><span class="n">layout_constraintStart_toStartOf</span><span class="p">=</span><span class="s">&quot;parent&quot;</span>
<a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a>        <span class="n">android</span><span class="p">:</span><span class="n">id</span><span class="p">=</span><span class="s">&quot;@+id/navigationAction&quot;</span>
<a id="__codelineno-36-6" name="__codelineno-36-6" href="#__codelineno-36-6"></a>        <span class="n">android</span><span class="p">:</span><span class="n">orientation</span><span class="p">=</span><span class="s">&quot;horizontal&quot;</span>
<a id="__codelineno-36-7" name="__codelineno-36-7" href="#__codelineno-36-7"></a>        <span class="n">app</span><span class="p">:</span><span class="n">layout_constraintBottom_toBottomOf</span><span class="p">=</span><span class="s">&quot;parent&quot;</span><span class="o">&gt;</span>
<a id="__codelineno-36-8" name="__codelineno-36-8" href="#__codelineno-36-8"></a>        <span class="p">&lt;</span><span class="n">Button</span>
<a id="__codelineno-36-9" name="__codelineno-36-9" href="#__codelineno-36-9"></a>            <span class="n">android</span><span class="p">:</span><span class="n">id</span><span class="p">=</span><span class="s">&quot;@+id/overViewRouteButton&quot;</span>
<a id="__codelineno-36-10" name="__codelineno-36-10" href="#__codelineno-36-10"></a>            <span class="n">android</span><span class="p">:</span><span class="n">layout_width</span><span class="p">=</span><span class="s">&quot;wrap_content&quot;</span>
<a id="__codelineno-36-11" name="__codelineno-36-11" href="#__codelineno-36-11"></a>            <span class="n">app</span><span class="p">:</span><span class="n">layout_constraintStart_toEndOf</span><span class="p">=</span><span class="s">&quot;@+id/stopNavigation&quot;</span>
<a id="__codelineno-36-12" name="__codelineno-36-12" href="#__codelineno-36-12"></a>            <span class="n">android</span><span class="p">:</span><span class="n">layout_height</span><span class="p">=</span><span class="s">&quot;wrap_content&quot;</span>
<a id="__codelineno-36-13" name="__codelineno-36-13" href="#__codelineno-36-13"></a>            <span class="n">app</span><span class="p">:</span><span class="n">layout_constraintTop_toBottomOf</span><span class="p">=</span><span class="s">&quot;@id/stopNavigation&quot;</span>
<a id="__codelineno-36-14" name="__codelineno-36-14" href="#__codelineno-36-14"></a>            <span class="n">android</span><span class="p">:</span><span class="n">layout_gravity</span><span class="p">=</span><span class="s">&quot;top&quot;</span>
<a id="__codelineno-36-15" name="__codelineno-36-15" href="#__codelineno-36-15"></a>            <span class="n">android</span><span class="p">:</span><span class="n">layout_margin</span><span class="p">=</span><span class="s">&quot;16dp&quot;</span>
<a id="__codelineno-36-16" name="__codelineno-36-16" href="#__codelineno-36-16"></a>            <span class="n">android</span><span class="p">:</span><span class="n">text</span><span class="p">=</span><span class="s">&quot;Over View&quot;</span>
<a id="__codelineno-36-17" name="__codelineno-36-17" href="#__codelineno-36-17"></a>            <span class="n">app</span><span class="p">:</span><span class="n">layout_anchorGravity</span><span class="p">=</span><span class="s">&quot;top|left&quot;</span>
<a id="__codelineno-36-18" name="__codelineno-36-18" href="#__codelineno-36-18"></a>            <span class="n">android</span><span class="p">:</span><span class="n">visibility</span><span class="p">=</span><span class="s">&quot;gone&quot;</span>
<a id="__codelineno-36-19" name="__codelineno-36-19" href="#__codelineno-36-19"></a>            <span class="n">android</span><span class="p">:</span><span class="n">textColor</span><span class="p">=</span><span class="s">&quot;@color/black&quot;</span>
<a id="__codelineno-36-20" name="__codelineno-36-20" href="#__codelineno-36-20"></a>            <span class="n">app</span><span class="p">:</span><span class="n">layout_constraintStart_toStartOf</span><span class="p">=</span><span class="s">&quot;parent&quot;</span>
<a id="__codelineno-36-21" name="__codelineno-36-21" href="#__codelineno-36-21"></a>            <span class="n">app</span><span class="p">:</span><span class="n">layout_constraintTop_toTopOf</span><span class="p">=</span><span class="s">&quot;parent&quot;</span> <span class="o">/&gt;</span>
<a id="__codelineno-36-22" name="__codelineno-36-22" href="#__codelineno-36-22"></a>        <span class="p">&lt;</span><span class="n">Button</span>
<a id="__codelineno-36-23" name="__codelineno-36-23" href="#__codelineno-36-23"></a>            <span class="n">android</span><span class="p">:</span><span class="n">id</span><span class="p">=</span><span class="s">&quot;@+id/recenterBtnCustom&quot;</span>
<a id="__codelineno-36-24" name="__codelineno-36-24" href="#__codelineno-36-24"></a>            <span class="n">android</span><span class="p">:</span><span class="n">layout_width</span><span class="p">=</span><span class="s">&quot;wrap_content&quot;</span>
<a id="__codelineno-36-25" name="__codelineno-36-25" href="#__codelineno-36-25"></a>            <span class="n">android</span><span class="p">:</span><span class="n">layout_height</span><span class="p">=</span><span class="s">&quot;wrap_content&quot;</span>
<a id="__codelineno-36-26" name="__codelineno-36-26" href="#__codelineno-36-26"></a>            <span class="n">app</span><span class="p">:</span><span class="n">layout_constraintBottom_toBottomOf</span><span class="p">=</span><span class="s">&quot;parent&quot;</span>
<a id="__codelineno-36-27" name="__codelineno-36-27" href="#__codelineno-36-27"></a>            <span class="n">android</span><span class="p">:</span><span class="n">layout_gravity</span><span class="p">=</span><span class="s">&quot;top&quot;</span>
<a id="__codelineno-36-28" name="__codelineno-36-28" href="#__codelineno-36-28"></a>            <span class="n">android</span><span class="p">:</span><span class="n">layout_margin</span><span class="p">=</span><span class="s">&quot;16dp&quot;</span>
<a id="__codelineno-36-29" name="__codelineno-36-29" href="#__codelineno-36-29"></a>            <span class="n">android</span><span class="p">:</span><span class="n">text</span><span class="p">=</span><span class="s">&quot;Recenter&quot;</span>
<a id="__codelineno-36-30" name="__codelineno-36-30" href="#__codelineno-36-30"></a>            <span class="n">android</span><span class="p">:</span><span class="n">visibility</span><span class="p">=</span><span class="s">&quot;gone&quot;</span>
<a id="__codelineno-36-31" name="__codelineno-36-31" href="#__codelineno-36-31"></a>            <span class="n">android</span><span class="p">:</span><span class="n">textColor</span><span class="p">=</span><span class="s">&quot;@color/black&quot;</span>
<a id="__codelineno-36-32" name="__codelineno-36-32" href="#__codelineno-36-32"></a>            <span class="n">app</span><span class="p">:</span><span class="n">layout_anchorGravity</span><span class="p">=</span><span class="s">&quot;top|left&quot;</span>
<a id="__codelineno-36-33" name="__codelineno-36-33" href="#__codelineno-36-33"></a>            <span class="n">app</span><span class="p">:</span><span class="n">layout_constraintStart_toStartOf</span><span class="p">=</span><span class="s">&quot;parent&quot;</span> <span class="o">/&gt;</span>
<a id="__codelineno-36-34" name="__codelineno-36-34" href="#__codelineno-36-34"></a>        <span class="p">&lt;</span><span class="n">Button</span>
<a id="__codelineno-36-35" name="__codelineno-36-35" href="#__codelineno-36-35"></a>            <span class="n">android</span><span class="p">:</span><span class="n">id</span><span class="p">=</span><span class="s">&quot;@+id/stopNavigation&quot;</span>
<a id="__codelineno-36-36" name="__codelineno-36-36" href="#__codelineno-36-36"></a>            <span class="n">android</span><span class="p">:</span><span class="n">layout_width</span><span class="p">=</span><span class="s">&quot;wrap_content&quot;</span>
<a id="__codelineno-36-37" name="__codelineno-36-37" href="#__codelineno-36-37"></a>            <span class="n">android</span><span class="p">:</span><span class="n">layout_height</span><span class="p">=</span><span class="s">&quot;wrap_content&quot;</span>
<a id="__codelineno-36-38" name="__codelineno-36-38" href="#__codelineno-36-38"></a>            <span class="n">android</span><span class="p">:</span><span class="n">textColor</span><span class="p">=</span><span class="s">&quot;@color/black&quot;</span>
<a id="__codelineno-36-39" name="__codelineno-36-39" href="#__codelineno-36-39"></a>            <span class="n">app</span><span class="p">:</span><span class="n">layout_constraintTop_toBottomOf</span><span class="p">=</span><span class="s">&quot;@id/overViewRouteButton&quot;</span>
<a id="__codelineno-36-40" name="__codelineno-36-40" href="#__codelineno-36-40"></a>            <span class="n">android</span><span class="p">:</span><span class="n">visibility</span><span class="p">=</span><span class="s">&quot;gone&quot;</span>
<a id="__codelineno-36-41" name="__codelineno-36-41" href="#__codelineno-36-41"></a>            <span class="n">app</span><span class="p">:</span><span class="n">layout_constraintBottom_toBottomOf</span><span class="p">=</span><span class="s">&quot;parent&quot;</span>
<a id="__codelineno-36-42" name="__codelineno-36-42" href="#__codelineno-36-42"></a>            <span class="n">android</span><span class="p">:</span><span class="n">layout_gravity</span><span class="p">=</span><span class="s">&quot;top&quot;</span>
<a id="__codelineno-36-43" name="__codelineno-36-43" href="#__codelineno-36-43"></a>            <span class="n">android</span><span class="p">:</span><span class="n">layout_margin</span><span class="p">=</span><span class="s">&quot;16dp&quot;</span>
<a id="__codelineno-36-44" name="__codelineno-36-44" href="#__codelineno-36-44"></a>            <span class="n">android</span><span class="p">:</span><span class="n">text</span><span class="p">=</span><span class="s">&quot;Stop&quot;</span>
<a id="__codelineno-36-45" name="__codelineno-36-45" href="#__codelineno-36-45"></a>            <span class="n">app</span><span class="p">:</span><span class="n">layout_anchorGravity</span><span class="p">=</span><span class="s">&quot;top|left&quot;</span>
<a id="__codelineno-36-46" name="__codelineno-36-46" href="#__codelineno-36-46"></a>            <span class="n">app</span><span class="p">:</span><span class="n">layout_constraintStart_toStartOf</span><span class="p">=</span><span class="s">&quot;parent&quot;</span> <span class="o">/&gt;</span>
<a id="__codelineno-36-47" name="__codelineno-36-47" href="#__codelineno-36-47"></a>    <span class="o">&lt;/</span><span class="n">androidx</span><span class="p">.</span><span class="n">appcompat</span><span class="p">.</span><span class="n">widget</span><span class="p">.</span><span class="n">LinearLayoutCompat</span><span class="p">&gt;</span>
</code></pre></div>
Declare three buttons for performing actions like zooming to the midpoint, viewing the entire route, and canceling navigation
<div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a>    <span class="kd">private</span> <span class="n">Button</span> <span class="n">recenterButton</span><span class="p">;</span>
<a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a>    <span class="kd">private</span> <span class="n">Button</span> <span class="n">overViewRouteButton</span><span class="p">;</span>
<a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a>    <span class="kd">private</span> <span class="n">Button</span> <span class="n">stopNavigation</span><span class="p">;</span>
</code></pre></div></p>
<h2 id="listener-and-execution-functions-in-the-custom-ui-screen">Listener and execution functions in the custom UI screen<a class="headerlink" href="#listener-and-execution-functions-in-the-custom-ui-screen" title="Permanent link">&para;</a></h2>
<p>Initialize the <code>NavigationPresenter</code> variable in the <code>onCreate</code> 
<div class="highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a>NavigationPresenter navigationPresenter = navigationView.getNavigationPresenter();
</code></pre></div></p>
<h2 id="create-controller-for-manage-functions">Create controller for manage functions<a class="headerlink" href="#create-controller-for-manage-functions" title="Permanent link">&para;</a></h2>
<p>recenterFunction
<div class="highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a>    <span class="n">recenterButton</span><span class="p">.</span><span class="n">setOnClickListener</span><span class="p">(</span><span class="n">new</span> <span class="n">View</span><span class="p">.</span><span class="n">OnClickListener</span><span class="p">()</span> <span class="p">{</span>
<a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a>        <span class="p">@</span><span class="n">Override</span>
<a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a>        <span class="kd">public</span> <span class="n">void</span> <span class="n">onClick</span><span class="p">(</span><span class="n">View</span> <span class="n">v</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a>            <span class="n">navigationPresenter</span><span class="p">.</span><span class="n">onRecenterClick</span><span class="p">();</span>
<a id="__codelineno-39-5" name="__codelineno-39-5" href="#__codelineno-39-5"></a>            <span class="n">changeNavigationActionState</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<a id="__codelineno-39-6" name="__codelineno-39-6" href="#__codelineno-39-6"></a>        <span class="p">}</span>
<a id="__codelineno-39-7" name="__codelineno-39-7" href="#__codelineno-39-7"></a>    <span class="p">});</span>
</code></pre></div>
routeOverViewButton(): Overview of the route
<div class="highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a>    <span class="n">overViewRouteButton</span><span class="p">.</span><span class="n">setOnClickListener</span><span class="p">(</span><span class="n">view</span> <span class="p">-&gt;</span> <span class="p">{</span>
<a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a>        <span class="n">navigationPresenter</span><span class="p">.</span><span class="n">onRouteOverviewClick</span><span class="p">();</span>
<a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a>        <span class="n">changeNavigationActionState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
<a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a>    <span class="p">});</span>
</code></pre></div>
stopNavigation(): In order to end navigation
<div class="highlight"><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a>    <span class="n">stopNavigation</span><span class="p">.</span><span class="n">setOnClickListener</span><span class="p">(</span><span class="n">view</span> <span class="p">-&gt;</span> <span class="p">{</span>
<a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a>        <span class="n">changeNavigationActionState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
<a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a>        <span class="n">expandCollapse</span><span class="p">();</span>
<a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a>        <span class="n">stopNavigationFunction</span><span class="p">();</span>
<a id="__codelineno-41-5" name="__codelineno-41-5" href="#__codelineno-41-5"></a>    <span class="p">});</span>
</code></pre></div>
Adjust <code>stopNavigation</code> by using this:
<div class="highlight"><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a>    <span class="n">void</span> <span class="n">stopNavigationFunction</span><span class="p">(){</span>
<a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a>        <span class="n">navigationView</span><span class="p">.</span><span class="n">stopNavigation</span><span class="p">();</span>
<a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a>        <span class="n">mapboxNavigation</span><span class="p">.</span><span class="n">stopNavigation</span><span class="p">();</span>
<a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a>        <span class="n">launchNavigationFab</span><span class="p">.</span><span class="n">show</span><span class="p">();</span>
<a id="__codelineno-42-5" name="__codelineno-42-5" href="#__codelineno-42-5"></a>        <span class="c1">//Thêm 3 dòng code dưới đây </span>
<a id="__codelineno-42-6" name="__codelineno-42-6" href="#__codelineno-42-6"></a>        <span class="n">recenterButton</span><span class="p">.</span><span class="n">setVisibility</span><span class="p">(</span><span class="n">View</span><span class="p">.</span><span class="n">GONE</span><span class="p">);</span>
<a id="__codelineno-42-7" name="__codelineno-42-7" href="#__codelineno-42-7"></a>        <span class="n">overViewRouteButton</span><span class="p">.</span><span class="n">setVisibility</span><span class="p">(</span><span class="n">View</span><span class="p">.</span><span class="n">GONE</span><span class="p">);</span>
<a id="__codelineno-42-8" name="__codelineno-42-8" href="#__codelineno-42-8"></a>        <span class="n">stopNavigation</span><span class="p">.</span><span class="n">setVisibility</span><span class="p">(</span><span class="n">View</span><span class="p">.</span><span class="n">GONE</span><span class="p">);</span>
<a id="__codelineno-42-9" name="__codelineno-42-9" href="#__codelineno-42-9"></a>    <span class="p">}</span>
</code></pre></div></p>
<p>recenterButton(): To listen to map movement events and display a button to return to the route when the user moves the map
<div class="highlight"><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a>    <span class="p">@</span><span class="n">Override</span>
<a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a>    <span class="kd">public</span> <span class="n">void</span> <span class="n">onMoveBegin</span><span class="p">(@</span><span class="n">NonNull</span> <span class="n">MoveGestureDetector</span> <span class="n">moveGestureDetector</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a>        <span class="n">changeNavigationActionState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
<a id="__codelineno-43-4" name="__codelineno-43-4" href="#__codelineno-43-4"></a>    <span class="p">}</span>
</code></pre></div></p>
<p>changeNavigationActionState(): To change the state of buttons
<div class="highlight"><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a>    <span class="n">void</span> <span class="n">changeNavigationActionState</span><span class="p">(</span><span class="n">boolean</span> <span class="n">isNavigationRunning</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a>        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">isNavigationRunning</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a>            <span class="n">overViewRouteButton</span><span class="p">.</span><span class="n">setVisibility</span><span class="p">(</span><span class="n">View</span><span class="p">.</span><span class="n">GONE</span><span class="p">);</span>
<a id="__codelineno-44-4" name="__codelineno-44-4" href="#__codelineno-44-4"></a>            <span class="n">recenterButton</span><span class="p">.</span><span class="n">setVisibility</span><span class="p">(</span><span class="n">View</span><span class="p">.</span><span class="n">VISIBLE</span><span class="p">);</span>
<a id="__codelineno-44-5" name="__codelineno-44-5" href="#__codelineno-44-5"></a>            <span class="n">stopNavigation</span><span class="p">.</span><span class="n">setVisibility</span><span class="p">(</span><span class="n">View</span><span class="p">.</span><span class="n">GONE</span><span class="p">);</span>
<a id="__codelineno-44-6" name="__codelineno-44-6" href="#__codelineno-44-6"></a>        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<a id="__codelineno-44-7" name="__codelineno-44-7" href="#__codelineno-44-7"></a>            <span class="n">overViewRouteButton</span><span class="p">.</span><span class="n">setVisibility</span><span class="p">(</span><span class="n">View</span><span class="p">.</span><span class="n">VISIBLE</span><span class="p">);</span>
<a id="__codelineno-44-8" name="__codelineno-44-8" href="#__codelineno-44-8"></a>            <span class="n">recenterButton</span><span class="p">.</span><span class="n">setVisibility</span><span class="p">(</span><span class="n">View</span><span class="p">.</span><span class="n">GONE</span><span class="p">);</span>
<a id="__codelineno-44-9" name="__codelineno-44-9" href="#__codelineno-44-9"></a>            <span class="n">stopNavigation</span><span class="p">.</span><span class="n">setVisibility</span><span class="p">(</span><span class="n">View</span><span class="p">.</span><span class="n">VISIBLE</span><span class="p">);</span>
<a id="__codelineno-44-10" name="__codelineno-44-10" href="#__codelineno-44-10"></a>        <span class="p">}</span>
<a id="__codelineno-44-11" name="__codelineno-44-11" href="#__codelineno-44-11"></a>    <span class="p">}</span>
</code></pre></div></p>
<p>initializeViews()
<div class="highlight"><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="kd">private</span> <span class="n">void</span> <span class="n">initializeViews</span><span class="p">(@</span><span class="n">Nullable</span> <span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a>        <span class="n">setContentView</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="n">layout</span><span class="p">.</span><span class="n">activity_viet_map_navigation</span><span class="p">);</span>
<a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a>        <span class="n">customUINavigation</span> <span class="p">=</span> <span class="n">findViewById</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="n">id</span><span class="p">.</span><span class="n">vietmapNavigation</span><span class="p">);</span>
<a id="__codelineno-45-4" name="__codelineno-45-4" href="#__codelineno-45-4"></a>        <span class="n">mapView</span> <span class="p">=</span> <span class="n">findViewById</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="n">id</span><span class="p">.</span><span class="n">mapView</span><span class="p">);</span>
<a id="__codelineno-45-5" name="__codelineno-45-5" href="#__codelineno-45-5"></a>        <span class="n">navigationView</span> <span class="p">=</span> <span class="n">findViewById</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="n">id</span><span class="p">.</span><span class="n">navigationView</span><span class="p">);</span>
<a id="__codelineno-45-6" name="__codelineno-45-6" href="#__codelineno-45-6"></a>        <span class="n">loading</span> <span class="p">=</span> <span class="n">findViewById</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="n">id</span><span class="p">.</span><span class="n">loading</span><span class="p">);</span>
<a id="__codelineno-45-7" name="__codelineno-45-7" href="#__codelineno-45-7"></a>        <span class="n">launchNavigationFab</span> <span class="p">=</span> <span class="n">findViewById</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="n">id</span><span class="p">.</span><span class="n">launchNavigation</span><span class="p">);</span>
<a id="__codelineno-45-8" name="__codelineno-45-8" href="#__codelineno-45-8"></a>        <span class="n">navigationView</span><span class="p">.</span><span class="n">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">);</span>
<a id="__codelineno-45-9" name="__codelineno-45-9" href="#__codelineno-45-9"></a>        <span class="n">mapView</span><span class="p">.</span><span class="n">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">);</span>
<a id="__codelineno-45-10" name="__codelineno-45-10" href="#__codelineno-45-10"></a>        <span class="n">launchNavigationFab</span><span class="p">.</span><span class="n">setOnClickListener</span><span class="p">(</span><span class="n">v</span> <span class="p">-&gt;</span> <span class="p">{</span>
<a id="__codelineno-45-11" name="__codelineno-45-11" href="#__codelineno-45-11"></a>            <span class="n">expandCollapse</span><span class="p">();</span>
<a id="__codelineno-45-12" name="__codelineno-45-12" href="#__codelineno-45-12"></a>            <span class="n">launchNavigation</span><span class="p">();</span>
<a id="__codelineno-45-13" name="__codelineno-45-13" href="#__codelineno-45-13"></a>        <span class="p">});</span>
<a id="__codelineno-45-14" name="__codelineno-45-14" href="#__codelineno-45-14"></a>        <span class="n">mapView</span><span class="p">.</span><span class="n">getMapAsync</span><span class="p">(</span><span class="n">this</span><span class="p">);</span>
<a id="__codelineno-45-15" name="__codelineno-45-15" href="#__codelineno-45-15"></a>        <span class="c1">/// Thêm 3 dòng dưới đây</span>
<a id="__codelineno-45-16" name="__codelineno-45-16" href="#__codelineno-45-16"></a>        <span class="n">overViewRouteButton</span> <span class="p">=</span> <span class="n">findViewById</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="n">id</span><span class="p">.</span><span class="n">overViewRouteButton</span><span class="p">);</span>
<a id="__codelineno-45-17" name="__codelineno-45-17" href="#__codelineno-45-17"></a>        <span class="n">stopNavigation</span> <span class="p">=</span> <span class="n">findViewById</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="n">id</span><span class="p">.</span><span class="n">stopNavigation</span><span class="p">);</span>
<a id="__codelineno-45-18" name="__codelineno-45-18" href="#__codelineno-45-18"></a>        <span class="n">recenterButton</span> <span class="p">=</span> <span class="n">findViewById</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="n">id</span><span class="p">.</span><span class="n">recenterBtnCustom</span><span class="p">);</span>
<a id="__codelineno-45-19" name="__codelineno-45-19" href="#__codelineno-45-19"></a>    <span class="p">}</span>
</code></pre></div>
<strong>Add this code into <code>launchNavigation</code></strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a>    <span class="kd">private</span> <span class="n">void</span> <span class="n">launchNavigation</span><span class="p">()</span> <span class="p">{</span>
<a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a>    <span class="p">...</span>
<a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a>        <span class="n">changeNavigationActionState</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<a id="__codelineno-46-4" name="__codelineno-46-4" href="#__codelineno-46-4"></a>    <span class="p">...</span>
<a id="__codelineno-46-5" name="__codelineno-46-5" href="#__codelineno-46-5"></a>    <span class="p">}</span>
</code></pre></div>
<strong>Adjust <code>stopNavigation</code></strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a>    <span class="n">void</span> <span class="n">stopNavigationFunction</span><span class="p">(){</span>
<a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a>        <span class="n">navigationView</span><span class="p">.</span><span class="n">stopNavigation</span><span class="p">();</span>
<a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a>        <span class="n">mapboxNavigation</span><span class="p">.</span><span class="n">stopNavigation</span><span class="p">();</span>
<a id="__codelineno-47-4" name="__codelineno-47-4" href="#__codelineno-47-4"></a>        <span class="n">recenterButton</span><span class="p">.</span><span class="n">setVisibility</span><span class="p">(</span><span class="n">View</span><span class="p">.</span><span class="n">GONE</span><span class="p">);</span>
<a id="__codelineno-47-5" name="__codelineno-47-5" href="#__codelineno-47-5"></a>        <span class="n">overViewRouteButton</span><span class="p">.</span><span class="n">setVisibility</span><span class="p">(</span><span class="n">View</span><span class="p">.</span><span class="n">GONE</span><span class="p">);</span>
<a id="__codelineno-47-6" name="__codelineno-47-6" href="#__codelineno-47-6"></a>        <span class="n">stopNavigation</span><span class="p">.</span><span class="n">setVisibility</span><span class="p">(</span><span class="n">View</span><span class="p">.</span><span class="n">GONE</span><span class="p">);</span>
<a id="__codelineno-47-7" name="__codelineno-47-7" href="#__codelineno-47-7"></a>        <span class="n">launchNavigationFab</span><span class="p">.</span><span class="n">show</span><span class="p">();</span>
<a id="__codelineno-47-8" name="__codelineno-47-8" href="#__codelineno-47-8"></a>    <span class="p">}</span>
</code></pre></div></p>
<h2 id="api-key-and-styleurl">API key and styleURL<a class="headerlink" href="#api-key-and-styleurl" title="Permanent link">&para;</a></h2>
<p>To ensure that the application doesn't crash when running, you need to add the styleUrl and apiKey provided by VietMap at the following locations:</p>
<ul>
<li>
<p>Add styleUrl in the <code>src/values/strings.xml</code> file</p>
</li>
<li>
<p>Add styleUrl in the <code>onMapReady</code> method</p>
</li>
<li>
<p>Add apiKey in the <code>fetchRoute</code> method</p>
</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2021 VIETMAP
    </div>
  
  
    Made with
    <a href="https://www.vietmap.vn" target="_blank" rel="noopener">
      VIETMAP
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.tooltips", "navigation.footer", "navigation.path", "navigation.indexes", "navigation.prune", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
  
      <script src="../../assets/javascripts/bundle.ad660dcc.min.js"></script>
      
    
  <script src="../../assets/javascripts/custom.a4a4fac0.min.js"></script>
  <style>
    .support-online {
      position: fixed;
      z-index: 999;
      right: 30px;
      bottom: 40%;
      top: auto !important;
      left: auto;
    }
    .support-online a {
      position: relative;
      margin: 10px;
      text-align: left;
      width: 40px;
      height: 40px
    }
  
    .support-online a.call-now span{
      line-height: 22px;
    }
  
    .support-online a.call-now span b{
      font-size: 16px;
      color: #fff700;
    }
  
    .support-online i {
      width: 40px;
      height: 40px;
      background: #2a5dff;
      color: #fff;
      border-radius: 100%;
      font-size: 20px;
      text-align: center;
      line-height: 40px;
      position: relative;
      z-index: 999
    }

    .support-content{
      
    }
  
    .support-online a {
      display: block
    }
  
    .support-online a span {
      border-radius: 2px;
      text-align: center;
      background: #2a5dff;
      padding: 10px;
      display: none;
      width: 150px;
      margin-right: 12px;
      position: absolute;
      color: #ffffff;
      z-index: 999;
      top: 0px;
      right: 41px;
      font-size: 13pt;
      transition: all 0.2s ease-in-out 0s;
      -moz-animation: headerAnimation 0.7s 1;
      -webkit-animation: headerAnimation 0.7s 1;
      -o-animation: headerAnimation 0.7s 1;
      animation: headerAnimation 0.7s 1;
    }

    .support-online img {
      height: 40px;
      width: 40px;
    }
  
    .support-online a:hover span {
      display: block
    }
  
    .support-online a span::before {
      content: "";
      width: 0;
      height: 0;
      border-style: solid;
      border-width: 10px 0 10px 10px;
      border-color: transparent transparent transparent #2a5dff;
      position: absolute;
      right: -10px;
      top: 10px
    }
  
    .kenit-alo-circle {
      width: 50px;
      height: 50px;
      top: -5px;
      right: -5px;
      position: absolute;
      background-color: transparent;
      -webkit-border-radius: 100%;
      -moz-border-radius: 100%;
      border-radius: 100%;
      border: 2px solid rgba(30, 30, 30, 0.4);
      opacity: .1;
      border-color: lighten(#2a5dff, 5);
      opacity: .5
    }
  
    .support-online .btn-support {
      cursor: pointer
    }
  
  
    .animated {
      animation-duration: 1s;
      animation-fill-mode: both;
    }
  
    .animated.infinite {
      animation-iteration-count: infinite;
    }
  
    .animated.hinge {
      animation-duration: 2s;
    }
  
    .animated.flipOutX,
    .animated.flipOutY,
    .animated.bounceIn,
    .animated.bounceOut {
      animation-duration: .75s;
    }
    @keyframes zoomIn {
      from {
        opacity: 0;
        transform: scale3d(.3, .3, .3);
      }
  
      50% {
        opacity: 1;
      }
    }
  
    .zoomIn {
      animation-name: zoomIn;
    }
    @keyframes rubberBand {
      from {
        transform: scale3d(1, 1, 1);
      }
  
      30% {
        transform: scale3d(1.25, 0.75, 1);
      }
  
      40% {
        transform: scale3d(0.75, 1.25, 1);
      }
  
      50% {
        transform: scale3d(1.15, 0.85, 1);
      }
  
      65% {
        transform: scale3d(.95, 1.05, 1);
      }
  
      75% {
        transform: scale3d(1.05, .95, 1);
      }
  
      to {
        transform: scale3d(1, 1, 1);
      }
    }
  </style>
  <div class="support-online">
    <div class="support-content">		
      <a href="tel:0896164567" class="call-now" rel="nofollow">
        <!-- <i class="fa fa-phone" aria-hidden="true"></i> -->
        <img src="/docs/assets/phone.png" width="50" height="50" alt="facebook">
        <div class="animated infinite zoomIn kenit-alo-circle"></div>			
        <span>Tổng đài hỗ trợ<br><b>089.616.4567</b></span>
      </a>
      <a href="https://m.me/VietmapMappingSolutions" target="_blank">
        <img src="/docs/assets/messenger.png" width="50" height="50" alt="facebook">
        <span>Chat Facebook</span>
      </a>
      <a href="https://zalo.me/vietmapmapsapi" target="_blank">
        <img src="//bizweb.dktcdn.net/100/415/690/files/icon-zalo.png" alt="zalo" width="50" height="50">
        <span>Chat Zalo</span>
      </a>
    </div>	
  </div>

  </body>
</html>